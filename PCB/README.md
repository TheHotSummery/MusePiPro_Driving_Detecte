# 多功能光耦隔离 I/O 模块

## 1. 项目概述

本项目是一款基于国产嘉立创，专为SPACEMIT 的 Muse Pi Pro 主控板设计的**多通道光耦隔离数字量 I/O 驱动模块**。它提供了3路隔离输入和6路大功率隔离输出，旨在安全地连接低压控制系统与较高电压的工业现场设备，有效消除地线回路干扰，防止高压浪涌对主控器的损害，极大增强系统的可靠性和安全性。

板载高质量的电源转换电路、全面的保护措施和灵活的逻辑极性配置，使其可以高效驱动外部大电流设备，成为自动化控制、智能家居、设备改造等领域的理想选择。

## 2. 主要特性

*   **完全隔离设计**：所有输入和输出通道均采用PC817C光电耦合器，实现控制端与I/O端的完全电气隔离。
*   **多通道配置**：提供 **3 路隔离输入** 和 **6 路隔离输出**，满足多种应用需求。
*   **宽电压输入**：输入通道支持 **5-12V DC** 信号电平，兼容各类传感器和逻辑电平。
*   **大功率输出**：输出通道采用高性能的 **N-Channel MOSFET (TPH1R403NL)**，能够驱动高达12V（如果需要提高电压，请调整贴片电容耐压值以及TVS）的直流负载，如继电器、电磁阀、直流电机、LED灯带等。
*   **灵活的逻辑配置**：
    *   **独立逻辑反转**：每一路输出的控制逻辑（高电平有效/默认有效）均可通过独立的跳线帽 (`H4` 至 `H9`) 进行配置。
*   **板载电源系统**：仅需外部提供12V主电源，板载AMS1117稳压芯片即可自动生成5V和3.3V电源，供内部逻辑电路和外部主控器参考使用。
*   **全面的保护电路**：
    *   **电源反接保护**：输入端采用1N4007二极管，防止电源意外反接烧毁电路。
    *   **瞬态电压抑制(TVS)**：电源和每个输入/输出端口均配备TVS二极管，吸收浪涌和静电。
    *   **感性负载保护**：每个输出通道均配备FR107快速恢复二极管，为继电器、电磁阀等感性负载提供续流保护。
    *   **MOSFET栅极保护**：采用稳压二极管和下拉电阻，确保MOSFET安全可靠地开关。
*   **状态指示清晰**：每一路输入和输出通道均配有独立的LED状态指示灯，工作状态一目了然。


## 3. 技术规格

| 项目 | 参数 | 备注 |
| :--- | :--- | :--- |
| **主电源电压** | 12V DC | 通过 `U12` 接线端子输入 |
| **隔离芯片** | PC817C | |
| **板载逻辑电压** | 5V / 3.3V | 由AMS1117系列LDO从12V生成 |
| **输入通道数** | 3 | |
| **输入信号电压** | 5V ~ 12V DC | |
| **输入端保护** | 1N4007 (防反接), SMBJ12CA (TVS) | |
| **输出通道数** | 6 | |
| **输出开关元件** | TPH1R403NL (N-Channel MOSFET) | 低边开关 (Low-side Switch) |
| **负载电压** | 0 ~ 12V DC | |
| **负载电流** | 取决于MOSFET参数和散热，建议在5A内长期使用 | 峰值电流可达更高 |
| **输出端保护** | FR107 (续流), SMBJ15CA (TVS) | |
| **控制信号电平**| 3.3V / 5V | 兼容主流MCU I/O电平 |

## 4. 接口与连接说明



*   **`U12` - 12V主电源输入**:
    *   `+`: 连接12V直流电源正极。
    *   `-`: 连接12V直流电源负极(GND)。

*   **`H1` & `U1` - 隔离输入端**:
    *   **`5-12V` (端子)**: 输入信号电源，可接入5V至12V的直流电源。
    *   **`H1` (排针)**: 连接来自传感器的信号或外部开关。当`H1`的引脚与`5-12V`端子导通时，对应输入通道激活。

*   **`H10` & `H3` - 控制信号输入**:
    *   这是连接主控板（如Arduino, ESP32）的接口。
    *   `GND`: 连接主控板的GND。
    *   `EN`: 连接主控板的一个GPIO，用于全局使能/禁用所有输出。
    *   `1`至`6`: 分别连接主控板的6个GPIO，用于控制6路输出通道的开关。

*   **`U15` / `U19` / ... - 负载输出端**:
    *   `+`: 连接负载的正极，并统一接到12V电源的正极。
    *   `L1-OUT` / `L2-OUT` ...: 连接负载的负极。当该通道激活时，此端口将被MOSFET拉到GND。

## 5. 跳线配置说明

这是本模块最灵活的部分，请根据您的需求进行配置。丝印上的“**高**”代表高电平有效，“**低**”代表非高电平有效。

### H2 - 全局使能 (EN) 逻辑配置（需要外接继电器，EN引脚输出）

此跳线决定 `EN` 控制引脚的有效逻辑电平。

| 跳线位置 | 功能 | 描述 |
| :--- | :--- | :--- |
| **连接 1-2** | **非高电平有效 (LOW)** | 当 `EN` 引脚为低电平时，允许所有输出通道工作。 |
| **连接 2-3** | **高电平有效 (HIGH)** | 当 `EN` 引脚为高电平时，允许所有输出通道工作。 |

### H4 ~ H9 - 各输出通道逻辑配置

每个输出通道都有一个独立的跳线，用于设定其控制信号的有效逻辑。

| 跳线位置 | 功能 | 描述 |
| :--- | :--- | :--- |
| **连接 1-2** | **高电平有效 (HIGH)** | 当对应的控制引脚（如`H3`的`1`号引脚）为高电平时，该路MOSFET导通，负载工作。 |
| **连接 2-3** | **非高电平有效 (LOW)** | 当对应的控制引脚为低电平时，该路MOSFET导通，负载工作。 |

## 6. 设计亮点解析

*   **两级三极管驱动**：在输出部分，使用 `U16` 和 `U18` (或仅 `U16`) 组成驱动级，确保为MOSFET栅极提供稳定、快速的开关信号，同时通过跳线帽选择，巧妙地实现了逻辑反转功能。
*   **开路集电极输出**：`GATE` 信号采用集电极开路设计，并通过一个上拉电阻为下游电路提供稳定的电源或高电平信号，这是一种常见且可靠的总线控制方式。
*   **模块化与可扩展性**：电路的输入和输出部分设计高度一致，易于理解和维护，并且可以方便地扩展更多通道。

## 7. 许可协议 (License)

MIT License

## 8. 注意点！！

本项目因为是特殊定制的一块板子，所以在跳线帽使能上面，一个是高电平有效，还有一个是非高电平有效，并非低电平有效，如果你需要低电平有效，必须自己修改原理图！！！！

## 版本信息

- **当前版本**：v1.0
- **最后更新**：2025-12-1

---


## 联系方式

如有问题或建议，请联系https://gitee.com/achenjiayi。或者来提出ISSUES？

---

**注意**：本文档有可能会持续更新，请定期查看最新版本。