import{_ as B,w as e}from"./index-DJi0W1Gn.js";import{r as S,h as D,U as M,z as f,A as m,R as d,J as l,B as n,al as p,O as i,P as r,Q as N,a6 as $}from"./vendor-BleAlWPf.js";import"./element-C3fiOSfn.js";import"./charts-TxDtCNV3.js";const V={class:"websocket-test"},z={class:"test-content"},A={class:"connection-status"},E={class:"test-actions"},J={class:"message-log"},L={class:"log-content"},O={class:"log-time"},R={class:"log-type"},U={class:"log-content"},F={__name:"WebSocketTest",setup(H){const o=S(!1),c=S([]),a=(s,t)=>{c.value.unshift({time:new Date().toLocaleTimeString(),type:s,content:t}),c.value.length>50&&(c.value=c.value.slice(0,50))},C=()=>{e.connect()},y=()=>{e.disconnect()},W=()=>{e.send("test",{message:"Hello WebSocket!"}),a("发送","测试消息")},g=()=>{o.value=!0,a("系统","WebSocket连接成功")},v=s=>{o.value=!1,a("系统",`WebSocket连接断开: ${s}`)},b=s=>{a("错误",`连接错误: ${s.message||s}`)},k=s=>{a("数据",`实时数据: ${JSON.stringify(s)}`)},h=s=>{a("告警",`新告警: ${s.message}`)};return D(()=>{e.on("connected",g),e.on("disconnected",v),e.on("error",b),e.on("realtime_data",k),e.on("alert",h),o.value=e.getConnectionStatus().isConnected,a("系统","WebSocket测试页面已加载")}),M(()=>{e.off("connected",g),e.off("disconnected",v),e.off("error",b),e.off("realtime_data",k),e.off("alert",h)}),(s,t)=>{const w=p("el-tag"),u=p("el-button"),x=p("el-card");return m(),f("div",V,[d(x,null,{header:l(()=>[...t[0]||(t[0]=[n("span",null,"WebSocket连接测试",-1)])]),default:l(()=>[n("div",z,[n("div",A,[d(w,{type:o.value?"success":"danger",size:"large"},{default:l(()=>[i(r(o.value?"已连接":"未连接"),1)]),_:1},8,["type"])]),n("div",E,[d(u,{onClick:C,disabled:o.value},{default:l(()=>[...t[1]||(t[1]=[i("连接",-1)])]),_:1},8,["disabled"]),d(u,{onClick:y,disabled:!o.value},{default:l(()=>[...t[2]||(t[2]=[i("断开",-1)])]),_:1},8,["disabled"]),d(u,{onClick:W,disabled:!o.value},{default:l(()=>[...t[3]||(t[3]=[i("发送测试消息",-1)])]),_:1},8,["disabled"])]),n("div",J,[t[4]||(t[4]=n("h4",null,"消息日志",-1)),n("div",L,[(m(!0),f(N,null,$(c.value,(_,T)=>(m(),f("div",{key:T,class:"log-item"},[n("span",O,r(_.time),1),n("span",R,r(_.type),1),n("span",U,r(_.content),1)]))),128))])])])]),_:1})])}}},q=B(F,[["__scopeId","data-v-1e232a04"]]);export{q as default};
