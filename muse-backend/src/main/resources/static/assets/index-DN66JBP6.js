const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AlertCenter-C_fAtiJ4.js","assets/vendor-BleAlWPf.js","assets/element-DCn9y4rn.js","assets/charts-TxDtCNV3.js","assets/AlertCenter-BHcmqX6g.css","assets/Analytics-Cr7ARNc2.js","assets/Analytics-QBwIeuHS.css","assets/UserManagement-BgIW5IMd.js","assets/UserManagement-DKxOPfbl.css","assets/WebSocketTest-CrVeIymN.js","assets/WebSocketTest-Cuq8cH5p.css","assets/MapConfigHelp-BsU0GYrR.js","assets/MapConfigHelp-IbllU7-j.css"])))=>i.map(i=>d[i]);
import{r as P,c as Q,ax as pn,h as He,U as Ve,z as W,A as L,R as a,J as c,al as D,B as r,u as H,I as ie,O as M,P as S,M as dt,E as Ce,L as fe,j as Pe,n as mn,ad as St,ay as Pt,az as Ft,ar as Nt,Q as Fe,a6 as Ne,D as ao,K as Ut,W as vn,aA as lo,aB as ro,au as io,aC as co}from"./vendor-BleAlWPf.js";import{m as hn,w as uo,b as kt,a as fo,s as po,i as mo,c as zt,d as vo,u as ho,e as go,f as gn,g as yo,l as yn,E as re,r as De,h as _o,j as wo,k as _n,v as bo,n as So,o as Eo,p as Io,q as Co,t as To}from"./element-DCn9y4rn.js";import{u as wn,E as bn,i as Sn,a as ko,b as En,c as In,d as Cn,e as Tn,f as xo,g as Ao,h as Do}from"./charts-TxDtCNV3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();class Oo{constructor(){this.socket=null,this.stompClient=null,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=6,this.reconnectInterval=5e3,this.longPauseInterval=1e4,this.listeners=new Map,this.isInLongPause=!1}connect(){let t="http://spacemit.topcoder.fun/websocket";t.startsWith("ws://")?t=t.replace("ws://","http://"):t.startsWith("wss://")?t=t.replace("wss://","https://"):!t.startsWith("http://")&&!t.startsWith("https://")&&(t=(window.location.protocol==="https:"?"https://":"http://")+t.replace(/^https?:\/\//,"")),console.log("SockJSè¿æ¥URL:",t);try{this.loadDependencies().then(()=>{this.createSTOMPConnection(t)}).catch(n=>{console.error("åŠ è½½ä¾èµ–å¤±è´¥:",n),this.emit("error",n)})}catch(n){console.error("WebSocketè¿æ¥å¤±è´¥:",n),this.emit("error",n);return}}loadDependencies(){return new Promise((t,n)=>{const o=[];if(window.SockJS||o.push(this.loadScript("https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js")),window.Stomp||o.push(this.loadScript("https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js")),o.length===0){t();return}Promise.all(o).then(t).catch(n)})}loadScript(t){return new Promise((n,o)=>{const s=document.createElement("script");s.src=t,s.onload=n,s.onerror=o,document.head.appendChild(s)})}createSTOMPConnection(t){try{console.log("åˆ›å»ºSTOMPè¿æ¥:",t),this.socket=new window.SockJS(t),this.stompClient=window.Stomp.over(this.socket),this.stompClient.debug=null,this.stompClient.connect({},n=>{console.log("WebSocketè¿æ¥æˆåŠŸ:",n),this.isConnected=!0,this.resetReconnectState(),this.subscribeToTopics(),this.emit("connected",n)},n=>{console.error("WebSocketè¿æ¥å¤±è´¥:",n),this.isConnected=!1,this.handleReconnect()})}catch(n){console.error("STOMPè¿æ¥å¤±è´¥:",n),this.emit("error",n)}}subscribeToTopics(){console.log("å¼€å§‹è®¢é˜…WebSocketä¸»é¢˜..."),this.stompClient.subscribe("/topic/realtime_data",t=>{try{const n=JSON.parse(t.body);console.log("æ”¶åˆ°å®æ—¶æ•°æ®æ¨é€:",n),this.emit("realtime_data",n)}catch(n){console.error("è§£æå®æ—¶æ•°æ®å¤±è´¥:",n)}}),this.stompClient.subscribe("/topic/device_status",t=>{try{const n=JSON.parse(t.body);console.log("æ”¶åˆ°è®¾å¤‡çŠ¶æ€æ›´æ–°:",n),this.emit("device_status",n)}catch(n){console.error("è§£æè®¾å¤‡çŠ¶æ€æ›´æ–°å¤±è´¥:",n)}}),this.stompClient.subscribe("/topic/alert",t=>{try{const n=JSON.parse(t.body);console.log("æ”¶åˆ°å‘Šè­¦æ¨é€:",n),this.emit("alert",n)}catch(n){console.error("è§£æå‘Šè­¦æ¨é€å¤±è´¥:",n)}}),this.stompClient.subscribe("/topic/event",t=>{try{const n=JSON.parse(t.body);console.log("æ”¶åˆ°äº‹ä»¶é€šçŸ¥:",n),this.emit("event",n)}catch(n){console.error("è§£æäº‹ä»¶é€šçŸ¥å¤±è´¥:",n)}}),console.log("WebSocketä¸»é¢˜è®¢é˜…å®Œæˆ")}handleReconnect(){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.reconnectAttempts===4&&!this.isInLongPause?(this.isInLongPause=!0,console.log(`ç¬¬${this.reconnectAttempts}æ¬¡é‡è¿å¤±è´¥ï¼Œæš‚åœ${this.longPauseInterval/1e3}ç§’åç»§ç»­é‡è¿`),setTimeout(()=>{this.isInLongPause=!1,this.connect()},this.longPauseInterval)):this.reconnectAttempts<=3?(console.log(`å°è¯•é‡è¿ (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},this.reconnectInterval)):(console.log(`å°è¯•é‡è¿ (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},this.reconnectInterval))):(console.error("è¾¾åˆ°æœ€å¤§é‡è¿æ¬¡æ•°ï¼Œåœæ­¢é‡è¿"),this.emit("max_reconnect_attempts"))}disconnect(){this.stompClient&&this.isConnected&&this.stompClient.disconnect(()=>{console.log("WebSocketè¿æ¥å·²æ–­å¼€"),this.isConnected=!1,this.emit("disconnected")})}send(t,n,o={}){this.stompClient&&this.isConnected?this.stompClient.send(t,o,JSON.stringify(n)):console.warn("WebSocketæœªè¿æ¥ï¼Œæ— æ³•å‘é€æ¶ˆæ¯")}on(t,n){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(n)}off(t,n){if(this.listeners.has(t)){const o=this.listeners.get(t),s=o.indexOf(n);s>-1&&o.splice(s,1)}}emit(t,n){this.listeners.has(t)&&this.listeners.get(t).forEach(o=>{try{o(n)}catch(s){console.error(`äº‹ä»¶å¤„ç†å™¨æ‰§è¡Œå¤±è´¥ (${t}):`,s)}})}resetReconnectState(){this.reconnectAttempts=0,this.isInLongPause=!1,console.log("WebSocketé‡è¿çŠ¶æ€å·²é‡ç½®")}getConnectionStatus(){return{isConnected:this.isConnected,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts,isInLongPause:this.isInLongPause}}}const se=new Oo,Ie=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Mo={id:"app"},Ro={class:"header-content"},$o={class:"header-actions"},Lo={__name:"App",setup(e){const t=pn(),n=P(!1),o=P(!1),s=P(!1),l=Q(()=>t.path==="/"?"/dashboard":t.path),i=P(new Date().toLocaleString()),f=P("production"),y=P("http://spacemit.topcoder.fun"),u=()=>{n.value=!n.value,document.documentElement.classList.toggle("dark",n.value),localStorage.setItem("theme",n.value?"dark":"light")},d=()=>{o.value=!0},_=x=>{const m={analytics:"/analytics",users:"/users","websocket-test":"/websocket-test"};m[x]&&(window.location.href=m[x])},C=x=>{s.value=x};return He(()=>{localStorage.getItem("theme")==="dark"&&(n.value=!0,document.documentElement.classList.add("dark")),se.on("connected",()=>C(!0)),se.on("disconnected",()=>C(!1)),s.value=se.getConnectionStatus().isConnected}),Ve(()=>{se.off("connected",C),se.off("disconnected",C)}),(x,m)=>{const h=D("el-icon"),w=D("el-menu-item"),A=D("el-menu"),O=D("el-button"),F=D("el-dropdown-item"),N=D("el-dropdown-menu"),G=D("el-dropdown"),K=D("el-header"),Z=D("RouterView"),ne=D("el-main"),oe=D("el-descriptions-item"),pe=D("el-tag"),ge=D("el-descriptions"),we=D("el-dialog");return L(),W("div",Mo,[a(K,{class:"app-header"},{default:c(()=>[r("div",Ro,[m[8]||(m[8]=r("div",{class:"logo"},[r("h1",null,"Muse äº‘ç«¯å®æ—¶æ£€æµ‹å¹³å°")],-1)),a(A,{"default-active":l.value,mode:"horizontal",router:"",class:"header-menu"},{default:c(()=>[a(w,{index:"/dashboard"},{default:c(()=>[a(h,null,{default:c(()=>[a(H(hn))]),_:1}),m[1]||(m[1]=r("span",null,"å®æ—¶ç›‘æ§",-1))]),_:1}),a(w,{index:"/events"},{default:c(()=>[a(h,null,{default:c(()=>[a(H(uo))]),_:1}),m[2]||(m[2]=r("span",null,"äº‹ä»¶ä¸­å¿ƒ",-1))]),_:1}),a(w,{index:"/alerts"},{default:c(()=>[a(h,null,{default:c(()=>[a(H(kt))]),_:1}),m[3]||(m[3]=r("span",null,"å‘Šè­¦ä¸­å¿ƒ",-1))]),_:1})]),_:1},8,["default-active"]),r("div",$o,[a(O,{size:"small",onClick:u},{default:c(()=>[a(h,null,{default:c(()=>[n.value?(L(),ie(H(fo),{key:0})):(L(),ie(H(po),{key:1}))]),_:1})]),_:1}),a(O,{size:"small",onClick:d},{default:c(()=>[a(h,null,{default:c(()=>[a(H(mo))]),_:1})]),_:1}),a(G,{onCommand:_,trigger:"click"},{dropdown:c(()=>[a(N,null,{default:c(()=>[a(F,{command:"analytics"},{default:c(()=>[a(h,null,{default:c(()=>[a(H(vo))]),_:1}),m[5]||(m[5]=M(" æ•°æ®åˆ†æ ",-1))]),_:1}),a(F,{command:"users"},{default:c(()=>[a(h,null,{default:c(()=>[a(H(ho))]),_:1}),m[6]||(m[6]=M(" ç”¨æˆ·ç®¡ç† ",-1))]),_:1}),a(F,{command:"websocket-test"},{default:c(()=>[a(h,null,{default:c(()=>[a(H(go))]),_:1}),m[7]||(m[7]=M(" è¿æ¥æµ‹è¯• ",-1))]),_:1})]),_:1})]),default:c(()=>[a(O,{size:"small"},{default:c(()=>[a(h,null,{default:c(()=>[a(H(zt))]),_:1}),m[4]||(m[4]=M(" ç®¡ç† ",-1))]),_:1})]),_:1})])])]),_:1}),a(ne,{class:"app-main"},{default:c(()=>[a(Z)]),_:1}),a(we,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=me=>o.value=me),title:"ç³»ç»Ÿä¿¡æ¯",width:"500px"},{default:c(()=>[a(ge,{column:1,border:""},{default:c(()=>[a(oe,{label:"ç³»ç»Ÿç‰ˆæœ¬"},{default:c(()=>[...m[9]||(m[9]=[M("v1.0.0",-1)])]),_:1}),a(oe,{label:"æ„å»ºæ—¶é—´"},{default:c(()=>[M(S(i.value),1)]),_:1}),a(oe,{label:"è¿è¡Œç¯å¢ƒ"},{default:c(()=>[M(S(f.value),1)]),_:1}),a(oe,{label:"APIåœ°å€"},{default:c(()=>[M(S(y.value),1)]),_:1}),a(oe,{label:"WebSocketçŠ¶æ€"},{default:c(()=>[a(pe,{type:s.value?"success":"danger"},{default:c(()=>[M(S(s.value?"å·²è¿æ¥":"æœªè¿æ¥"),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Po=Ie(Lo,[["__scopeId","data-v-ff617af4"]]),Fo="modulepreload",No=function(e){return"/"+e},Yt={},Ke=function(t,n,o){let s=Promise.resolve();if(n&&n.length>0){let y=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),f=i?.nonce||i?.getAttribute("nonce");s=y(n.map(u=>{if(u=No(u),u in Yt)return;Yt[u]=!0;const d=u.endsWith(".css"),_=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${_}`))return;const C=document.createElement("link");if(C.rel=d?"stylesheet":Fo,d||(C.as="script"),C.crossOrigin="",C.href=u,f&&C.setAttribute("nonce",f),document.head.appendChild(C),d)return new Promise((x,m)=>{C.addEventListener("load",x),C.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(i){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=i,window.dispatchEvent(f),!f.defaultPrevented)throw i}return s.then(i=>{for(const f of i||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})},Uo={class:"stat-content"},zo={class:"stat-value"},Bo={class:"stat-label"},Ho={key:0,class:"stat-trend"},Vo={__name:"StatCard",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0},icon:{type:String,required:!0},color:{type:String,default:"primary",validator:e=>["primary","success","warning","danger","info"].includes(e)},suffix:{type:String,default:""},trend:{type:Number,default:void 0},pulse:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},urgent:{type:Boolean,default:!1}},setup(e){const t=e,n=Q(()=>typeof t.value=="number"?t.value.toLocaleString():t.value),o=Q(()=>`stat-card--${t.color}${t.pulse?" stat-card--pulse":""}${t.highlight?" stat-card--highlight":""}${t.urgent?" stat-card--urgent":""}`),s=Q(()=>`stat-icon--${t.color}${t.pulse?" stat-icon--pulse":""}${t.highlight?" stat-icon--highlight":""}${t.urgent?" stat-icon--urgent":""}`),l=Q(()=>t.trend>0?"trend-up":"trend-down");return(i,f)=>{const y=D("el-icon");return L(),W("div",{class:Ce(["stat-card",o.value])},[r("div",{class:Ce(["stat-icon",s.value])},[a(y,null,{default:c(()=>[(L(),ie(dt(e.icon)))]),_:1})],2),r("div",Uo,[r("div",zo,S(n.value)+S(e.suffix),1),r("div",Bo,S(e.title),1),e.trend!==void 0?(L(),W("div",Ho,[a(y,{class:Ce(l.value)},{default:c(()=>[(L(),ie(dt(e.trend>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),r("span",null,S(Math.abs(e.trend))+"%",1)])):fe("",!0)])],2)}}},rt=Ie(Vo,[["__scopeId","data-v-d57b29d8"]]),Wo={__name:"DeviceStatusTag",props:{status:{type:String,required:!0,validator:e=>["ONLINE","OFFLINE","LOST"].includes(e)},effect:{type:String,default:"light",validator:e=>["dark","light","plain"].includes(e)}},setup(e){const t=e,n={ONLINE:{type:"success",icon:"CircleCheck",text:"åœ¨çº¿"},OFFLINE:{type:"info",icon:"CircleClose",text:"ç¦»çº¿"},LOST:{type:"danger",icon:"Warning",text:"å¤±è”"}},o=Q(()=>n[t.status]?.type||"info"),s=Q(()=>n[t.status]?.icon||"CircleClose"),l=Q(()=>n[t.status]?.text||"æœªçŸ¥");return(i,f)=>{const y=D("el-icon"),u=D("el-tag");return L(),ie(u,{type:o.value,effect:e.effect,size:"small"},{default:c(()=>[a(y,{class:"status-icon"},{default:c(()=>[(L(),ie(dt(s.value)))]),_:1}),M(" "+S(l.value),1)]),_:1},8,["type","effect"])}}},xt=Ie(Wo,[["__scopeId","data-v-2e81de45"]]),jo={class:"health-progress"},qo={__name:"HealthProgress",props:{score:{type:Number,required:!0,validator:e=>e>=0&&e<=100}},setup(e){const t=e,n=Q(()=>Math.round(t.score)),o=Q(()=>t.score>=80?"#67C23A":t.score>=60?"#E6A23C":"#F56C6C"),s=Q(()=>t.score>=80?"text-success":t.score>=60?"text-warning":"text-danger");return(l,i)=>{const f=D("el-progress");return L(),W("div",jo,[a(f,{percentage:n.value,color:o.value,"stroke-width":8,"show-text":!1},null,8,["percentage","color"]),r("span",{class:Ce(["health-text",s.value])},S(n.value)+"%",3)])}}},At=Ie(qo,[["__scopeId","data-v-ada9c17b"]]),Go={class:"map-controls"},Ko={key:0,class:"map-error"},Jo={key:1,class:"map-loading"},_e=3.141592653589793,Xt=6378245,Qt=.006693421622965943,Yo={__name:"SimpleMap",props:{devices:{type:Array,default:()=>[]},center:{type:Object,default:()=>({lat:33.553733,lng:119.030953})},zoom:{type:Number,default:10}},emits:["device-click","map-ready"],setup(e,{expose:t,emit:n}){const o=e,s=n,l=P(null),i=P(!1),f=P(""),y=P("");let u=null,d=[],_=null,C=new Map,x=1e-4;function m(I,R){let b=-100+2*I+3*R+.2*R*R+.1*I*R+.2*Math.sqrt(Math.abs(I));return b+=(20*Math.sin(6*I*_e)+20*Math.sin(2*I*_e))*2/3,b+=(20*Math.sin(R*_e)+40*Math.sin(R/3*_e))*2/3,b+=(160*Math.sin(R/12*_e)+320*Math.sin(R*_e/30))*2/3,b}function h(I,R){let b=300+I+2*R+.1*I*I+.1*I*R+.1*Math.sqrt(Math.abs(I));return b+=(20*Math.sin(6*I*_e)+20*Math.sin(2*I*_e))*2/3,b+=(20*Math.sin(I*_e)+40*Math.sin(I/3*_e))*2/3,b+=(150*Math.sin(I/12*_e)+300*Math.sin(I/30*_e))*2/3,b}function w(I,R){return I<72.004||I>137.8347||R<.8293||R>55.8271||!1}function A(I,R){if(w(I,R))return[I,R];{let b=m(I-105,R-35),k=h(I-105,R-35);const $=R/180*_e;let U=Math.sin($);U=1-Qt*U*U;const Y=Math.sqrt(U);b=b*180/(Xt*(1-Qt)/(U*Y)*_e),k=k*180/(Xt/Y*Math.cos($)*_e);const X=R+b;return[I+k,X]}}const O=P(""),F=()=>{const I="732a364f70864bb0c4ac3395cc3d5503";localStorage.getItem("amap_api_key"),O.value=I},N=async()=>{if(console.log("å¼€å§‹åˆå§‹åŒ–åœ°å›¾..."),console.log("API Key:",O.value?"å·²é…ç½®":"æœªé…ç½®"),console.log("åœ°å›¾å®¹å™¨:",l.value),!O.value){f.value="é«˜å¾·åœ°å›¾API keyæœªé…ç½®";return}if(!l.value){f.value="åœ°å›¾å®¹å™¨æœªæ‰¾åˆ°";return}i.value=!0,f.value="";try{if(window.AMap||(console.log("åŠ è½½é«˜å¾·åœ°å›¾API..."),await G()),!window.AMap)throw new Error("é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥");console.log("AMapå·²åŠ è½½ï¼Œå¼€å§‹åˆ›å»ºåœ°å›¾å®ä¾‹..."),console.log("åœ°å›¾å®¹å™¨å°ºå¯¸:",l.value.offsetWidth,"x",l.value.offsetHeight),u=new window.AMap.Map(l.value,{center:[o.center.lng,o.center.lat],zoom:o.zoom,mapStyle:"amap://styles/normal"}),console.log("åœ°å›¾å®ä¾‹åˆ›å»ºæˆåŠŸ"),_=new window.AMap.InfoWindow({offset:new window.AMap.Pixel(0,-30)}),u.on("complete",()=>{console.log("åœ°å›¾åŠ è½½å®Œæˆ"),u.on("click",()=>{_&&_.close()}),s("map-ready",u),ne(),i.value=!1})}catch(I){console.error("åœ°å›¾åˆå§‹åŒ–å¤±è´¥:",I),f.value=I.message||"åœ°å›¾åˆå§‹åŒ–å¤±è´¥",i.value=!1}},G=()=>new Promise((I,R)=>{if(window.AMap){I();return}const b=localStorage.getItem("amap_version")||"1.4.15",k=document.createElement("script");k.src=`https://webapi.amap.com/maps?v=${b}&key=${O.value}`,k.onload=()=>{const $=()=>{window.AMap&&window.AMap.Map?I():setTimeout($,100)};$()},k.onerror=()=>{R(new Error("é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥"))},document.head.appendChild(k)}),K=I=>{const R=[],b=[];return I.forEach(k=>{const $=St(k)||k;if($.location&&$.location.lat&&$.location.lng){const U=$.deviceId,Y={lat:$.location.lat,lng:$.location.lng};if($.status==="ONLINE"&&b.push($),C.has(U)){const X=C.get(U),de=Math.abs(Y.lat-X.lat),Ee=Math.abs(Y.lng-X.lng);(de>x||Ee>x)&&(console.log(`è®¾å¤‡ ${U} ä½ç½®å‘ç”Ÿå˜åŒ–:`,{from:X,to:Y,latDiff:de,lngDiff:Ee}),R.push($))}else console.log(`æ–°è®¾å¤‡ ${U} é¦–æ¬¡å‡ºç°`),R.push($);C.set(U,Y)}}),{changedDevices:R,onlineDevices:b}},Z=I=>{if(I.length===0)return;const R=I.filter(b=>b.status==="ONLINE");if(R.length>0){console.log("è‡ªåŠ¨èšç„¦åˆ°ä½ç½®å˜åŒ–çš„åœ¨çº¿è®¾å¤‡:",R.map(k=>k.deviceId));const b=d.filter(k=>{const $=k.getTitle().split(" - ")[0];return R.some(U=>U.deviceId===$)});b.length>0&&(u.setFitView(b,!1,[50,50,50,50]),b.forEach(k=>{k.setAnimation("AMAP_ANIMATION_BOUNCE"),setTimeout(()=>{k.setAnimation(null)},2e3)}))}},ne=()=>{if(!u)return;console.log("=== æ›´æ–°åœ°å›¾æ ‡è®° ==="),console.log("æ‰€æœ‰è®¾å¤‡:",o.devices),console.log("å½“å‰ç­›é€‰çŠ¶æ€:",y.value);const{changedDevices:I}=K(o.devices);d.forEach(b=>u.remove(b)),d=[];const R=o.devices.filter(b=>{const k=St(b)||b;if(console.log(`æ£€æŸ¥è®¾å¤‡ ${k.deviceId}:`,{status:k.status,hasLocation:!!(k.location&&k.location.lat&&k.location.lng),location:k.location}),y.value&&k.status!==y.value)return console.log(`è®¾å¤‡ ${k.deviceId} çŠ¶æ€ä¸åŒ¹é…ï¼Œè·³è¿‡`),!1;const $=k.location&&k.location.lat&&k.location.lng;return $||console.log(`è®¾å¤‡ ${k.deviceId} æ²¡æœ‰æœ‰æ•ˆä½ç½®ä¿¡æ¯ï¼Œè·³è¿‡`),$});console.log("ç­›é€‰åçš„è®¾å¤‡:",R),R.forEach((b,k)=>{const $=St(b)||b;if($.location&&$.location.lat&&$.location.lng){const[U,Y]=A($.location.lng,$.location.lat),X=I.some(Ee=>Ee.deviceId===$.deviceId),de=new window.AMap.Marker({position:[U,Y],title:`${$.deviceId} - ${$.username||"æœªçŸ¥ç”¨æˆ·"}`,icon:oe($.status,k,X),anchor:"center",label:{content:`${$.deviceId}<br/>${$.username||"æœªçŸ¥ç”¨æˆ·"}<br/>${pe($.status)}${X?"<br/>ğŸ“ ä½ç½®æ›´æ–°":""}`,direction:"bottom",offset:new window.AMap.Pixel(0,10),style:{backgroundColor:X?"#FF6B6B":ge($.status),color:"#fff",fontSize:"12px",padding:"4px 8px",borderRadius:"4px",border:"1px solid #fff"}}});de.on("click",()=>{we($,de),s("device-click",$)}),d.push(de),u.add(de)}}),Z(I),I.length===0&&R.length>0&&u.setFitView(d)},oe=(I,R,b=!1)=>{const k=["#67C23A","#E6A23C","#F56C6C","#409EFF","#909399","#9C27B0","#FF9800","#4CAF50"];let $=k[R%k.length];return b&&($="#FF6B6B"),new window.AMap.Icon({size:new window.AMap.Size(32,32),image:`data:image/svg+xml;base64,${btoa(`
      <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
        <circle cx="16" cy="16" r="12" fill="${$}" stroke="#fff" stroke-width="2"/>
        <circle cx="16" cy="16" r="4" fill="#fff"/>
        <text x="16" y="20" text-anchor="middle" fill="#fff" font-size="8" font-weight="bold">${R+1}</text>
        ${b?'<circle cx="16" cy="16" r="14" fill="none" stroke="#FF6B6B" stroke-width="3" opacity="0.8"/>':""}
      </svg>
    `)}`,imageSize:new window.AMap.Size(32,32)})},pe=I=>({ONLINE:"åœ¨çº¿",OFFLINE:"ç¦»çº¿",LOST:"å¤±è”"})[I]||"æœªçŸ¥",ge=I=>({ONLINE:"#67C23A",OFFLINE:"#909399",LOST:"#F56C6C"})[I]||"#909399",we=(I,R)=>{const[b,k]=A(I.location.lng,I.location.lat),$=I.status==="ONLINE",U=`
    <div class="device-info-window">
      <h4>${I.deviceId}</h4>
      <p><strong>é©¾é©¶å‘˜:</strong> ${I.username||"æœªçŸ¥"}</p>
      <p><strong>çŠ¶æ€:</strong> <span style="color: ${ge(I.status)}">${pe(I.status)}</span></p>
      <p><strong>å¥åº·åº¦:</strong> ${I.healthScore||0}%</p>
      <p><strong>æœ€åå¿ƒè·³:</strong> ${me(I.lastSeen)}</p>
      
      ${$?`
        <hr style="margin: 8px 0;">
        <p><strong>å®æ—¶ä¿¡æ¯:</strong></p>
        <p><strong>é€Ÿåº¦:</strong> ${I.location.speed||0} km/h</p>
        <p><strong>æ–¹å‘:</strong> ${I.location.direction||0}Â°</p>
        <p><strong>å«æ˜Ÿæ•°:</strong> ${I.location.satellites||0}</p>
        <p><strong>æµ·æ‹”:</strong> ${I.location.altitude||0} m</p>
        <p><strong>ç²¾åº¦:</strong> ${I.location.hdop||0}</p>
      `:`
        <hr style="margin: 8px 0;">
        <p style="color: #909399; font-style: italic;">è®¾å¤‡ç¦»çº¿ï¼Œå®æ—¶ä¿¡æ¯ä¸å¯ç”¨</p>
      `}
      
      <hr style="margin: 8px 0;">
      <p><strong>åŸå§‹åæ ‡ (WGS-84):</strong></p>
      <p>ç»åº¦: ${I.location.lng.toFixed(6)}</p>
      <p>çº¬åº¦: ${I.location.lat.toFixed(6)}</p>
      <p><strong>æ ¡å‡†åæ ‡ (GCJ-02):</strong></p>
      <p>ç»åº¦: ${b.toFixed(6)}</p>
      <p>çº¬åº¦: ${k.toFixed(6)}</p>
    </div>
  `;_.setContent(U),_.open(u,R.getPosition())},me=I=>{if(!I)return"æœªçŸ¥";const R=new Date(I),k=new Date-R,$=Math.floor(k/6e4);if($<1)return"åˆšåˆš";if($<60)return`${$}åˆ†é’Ÿå‰`;const U=Math.floor($/60);return U<24?`${U}å°æ—¶å‰`:R.toLocaleDateString()},E=()=>{u&&o.devices.length>0?u.setFitView(d):u&&u.setCenter([o.center.lng,o.center.lat])},p=()=>{l.value.requestFullscreen&&l.value.requestFullscreen()},ee=()=>{f.value="",u&&(u.destroy(),u=null),N()},te=()=>{console.log("å¼ºåˆ¶åˆ·æ–°åœ°å›¾..."),u&&(u.destroy(),u=null),d=[],setTimeout(()=>{N()},100)};return Pe(()=>o.devices,ne,{deep:!0}),Pe(()=>O.value,I=>{I&&!u&&N()}),He(()=>{F(),mn(()=>{O.value&&N()})}),Ve(()=>{u&&u.destroy()}),t({centerMap:E,updateMarkers:ne,forceRefresh:te,getMap:()=>u}),(I,R)=>{const b=D("el-option"),k=D("el-select"),$=D("el-icon"),U=D("el-button"),Y=D("el-button-group"),X=D("el-alert");return L(),W("div",{class:"simple-map",ref_key:"mapContainer",ref:l},[r("div",Go,[a(k,{modelValue:y.value,"onUpdate:modelValue":R[0]||(R[0]=de=>y.value=de),placeholder:"ç­›é€‰è®¾å¤‡çŠ¶æ€",size:"small",clearable:"",style:{"margin-right":"10px",width:"150px"},onChange:ne},{default:c(()=>[a(b,{label:"å…¨éƒ¨è®¾å¤‡",value:""}),a(b,{label:"åœ¨çº¿è®¾å¤‡",value:"ONLINE"}),a(b,{label:"ç¦»çº¿è®¾å¤‡",value:"OFFLINE"}),a(b,{label:"å¤±è”è®¾å¤‡",value:"LOST"})]),_:1},8,["modelValue"]),a(Y,null,{default:c(()=>[a(U,{size:"small",onClick:E},{default:c(()=>[a($,null,{default:c(()=>[a(H(gn))]),_:1}),R[1]||(R[1]=M(" å±…ä¸­ ",-1))]),_:1}),a(U,{size:"small",onClick:p},{default:c(()=>[a($,null,{default:c(()=>[a(H(yo))]),_:1}),R[2]||(R[2]=M(" å…¨å± ",-1))]),_:1})]),_:1})]),f.value?(L(),W("div",Ko,[a(X,{title:"åœ°å›¾åŠ è½½å¤±è´¥",description:f.value,type:"error","show-icon":"",closable:!1},null,8,["description"]),a(U,{onClick:ee,style:{"margin-top":"10px"}},{default:c(()=>[...R[3]||(R[3]=[M("é‡è¯•",-1)])]),_:1})])):fe("",!0),i.value?(L(),W("div",Jo,[a($,{class:"is-loading"},{default:c(()=>[a(H(yn))]),_:1}),R[4]||(R[4]=r("span",null,"åœ°å›¾åŠ è½½ä¸­...",-1))])):fe("",!0)],512)}}},Xo=Ie(Yo,[["__scopeId","data-v-bda4ae20"]]),Qo={class:"event-trend-chart"},Zo={class:"chart-header"},es={__name:"EventTrendChart",props:{data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["period-change"],setup(e,{emit:t}){wn([Sn,ko,En,In,Cn,Tn,xo]);const n=e,o=t,s=P("today"),l=Q(()=>{const d=["FATIGUE","DISTRACTION","EMERGENCY"],_=["#FF8C00","#DC143C","#32CD32"],C=i();return{title:{text:"äº‹ä»¶è¶‹åŠ¿",left:"center",textStyle:{fontSize:16,fontWeight:"bold",color:"#303133"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",lineStyle:{color:"#999",width:1}},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#ccc",borderWidth:1,textStyle:{color:"#fff"},formatter:function(x){let m=`<div style="margin-bottom: 8px; font-weight: bold; font-size: 14px; color: #fff;">${x[0].axisValue}</div>`;return x.forEach(h=>{const w=h.value||0;m+=`<div style="margin: 4px 0; display: flex; align-items: center;">
            <span style="display: inline-block; width: 12px; height: 12px; background-color: ${h.color}; border-radius: 50%; margin-right: 8px;"></span>
            <span style="color: #fff; font-weight: 500;">${h.seriesName}:</span>
            <span style="color: #fff; font-weight: bold; margin-left: 8px;">${w}</span>
          </div>`}),m}},legend:{data:["ç–²åŠ³äº‹ä»¶","åˆ†å¿ƒäº‹ä»¶","ç´§æ€¥äº‹ä»¶"],top:30,textStyle:{fontSize:12,fontWeight:"bold"}},grid:{left:"3%",right:"4%",bottom:"15%",top:"20%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:C.timeLabels,axisLabel:{rotate:45,color:"#666",fontSize:11},axisLine:{lineStyle:{color:"#ddd"}}},yAxis:{type:"value",name:"äº‹ä»¶æ•°é‡",nameTextStyle:{color:"#666",fontSize:12},axisLabel:{formatter:"{value}",color:"#666",fontSize:11},axisLine:{lineStyle:{color:"#ddd"}},splitLine:{lineStyle:{color:"#f0f0f0",type:"dashed"}}},dataZoom:[{type:"inside",start:0,end:100}],series:d.map((x,m)=>({name:y(x),type:"line",data:C.seriesData[x]||[],smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:4},itemStyle:{color:_[m],borderColor:"#fff",borderWidth:2},areaStyle:{opacity:.2,color:_[m]},label:{show:!1,position:"top",formatter:"{c}",fontSize:10,fontWeight:"bold",color:_[m]},emphasis:{focus:"series",itemStyle:{borderColor:"#fff",borderWidth:3,shadowBlur:10,shadowColor:_[m]}}}))}}),i=()=>{if(!n.data.length)return{timeLabels:[],seriesData:{}};const d={},_=["FATIGUE","DISTRACTION","EMERGENCY"];n.data.forEach(m=>{const h=f(m.timestamp);d[h]||(d[h]={}),d[h][m.eventType]||(d[h][m.eventType]=0),d[h][m.eventType]++});const C=Object.keys(d).sort(),x={};return _.forEach(m=>{x[m]=C.map(h=>d[h]?.[m]||0)}),{timeLabels:C,seriesData:x}},f=d=>{const _=new Date(d);switch(s.value){case"today":return`${_.getHours().toString().padStart(2,"0")}:${_.getMinutes().toString().padStart(2,"0")}`;case"week":return`${_.getMonth()+1}/${_.getDate()}`;case"month":return`${_.getMonth()+1}/${_.getDate()}`;default:return _.toLocaleDateString()}},y=d=>({FATIGUE:"ç–²åŠ³äº‹ä»¶",DISTRACTION:"åˆ†å¿ƒäº‹ä»¶",EMERGENCY:"ç´§æ€¥äº‹ä»¶"})[d]||d,u=d=>{o("period-change",d)};return Pe(()=>n.data,()=>{},{deep:!0}),(d,_)=>{const C=D("el-option"),x=D("el-select");return L(),W("div",Qo,[r("div",Zo,[_[1]||(_[1]=r("h3",null,"äº‹ä»¶è¶‹åŠ¿åˆ†æ",-1)),a(x,{modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=m=>s.value=m),onChange:u,size:"small"},{default:c(()=>[a(C,{label:"ä»Šæ—¥",value:"today"}),a(C,{label:"æœ¬å‘¨",value:"week"}),a(C,{label:"æœ¬æœˆ",value:"month"})]),_:1},8,["modelValue"])]),a(H(bn),{class:"chart",option:l.value,loading:e.loading,autoresize:"","canvas-id":"event-trend-chart"},null,8,["option","loading"])])}}},kn=Ie(es,[["__scopeId","data-v-b1a642fe"]]),ts={class:"fatigue-analysis-chart"},ns={class:"chart-header"},os={__name:"FatigueAnalysisChart",props:{data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["type-change"],setup(e,{emit:t}){wn([Sn,Ao,Do,En,In,Cn,Tn]);const n=e,o=t,s=P("hourly"),l=Q(()=>{switch(s.value){case"hourly":return i();case"severity":return f();case"behavior":return y();default:return i()}}),i=()=>{const x=u();return{title:{text:"ç–²åŠ³äº‹ä»¶å°æ—¶åˆ†å¸ƒ",left:"center",textStyle:{fontSize:16,fontWeight:"bold",color:"#303133"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0, 0, 0, 0.1)"}},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#ccc",borderWidth:1,textStyle:{color:"#fff"},formatter:function(m){const h=m[0];return`<div style="color: #fff; font-weight: bold;">${h.axisValue}:00</div>
                <div style="margin-top: 4px; color: #fff;">
                  <span style="display: inline-block; width: 12px; height: 12px; background-color: ${h.color}; border-radius: 50%; margin-right: 8px;"></span>
                  ç–²åŠ³äº‹ä»¶: <span style="font-weight: bold;">${h.value}</span>
                </div>`}},grid:{left:"3%",right:"4%",bottom:"15%",top:"20%",containLabel:!0},xAxis:{type:"category",data:x.labels,axisLabel:{formatter:"{value}:00",color:"#666",fontSize:11},axisLine:{lineStyle:{color:"#ddd"}}},yAxis:{type:"value",name:"äº‹ä»¶æ•°é‡",nameTextStyle:{color:"#666",fontSize:12},axisLabel:{color:"#666",fontSize:11},axisLine:{lineStyle:{color:"#ddd"}},splitLine:{lineStyle:{color:"#f0f0f0",type:"dashed"}}},series:[{name:"ç–²åŠ³äº‹ä»¶",type:"bar",data:x.values,itemStyle:{color:"#FF8C00",borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:"#FF7F00",shadowBlur:10,shadowColor:"#FF8C00"}},label:{show:!0,position:"top",formatter:"{c}",fontSize:10,fontWeight:"bold",color:"#FF8C00"}}]}},f=()=>{const x=d();return{title:{text:"ç–²åŠ³äº‹ä»¶ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ",left:"center",textStyle:{fontSize:16,fontWeight:"bold",color:"#303133"}},tooltip:{trigger:"item",backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#ccc",borderWidth:1,textStyle:{color:"#fff"},formatter:function(m){return`<div style="color: #fff; font-weight: bold;">${m.name}</div>
                <div style="margin-top: 4px; color: #fff;">
                  <span style="display: inline-block; width: 12px; height: 12px; background-color: ${m.color}; border-radius: 50%; margin-right: 8px;"></span>
                  æ•°é‡: <span style="font-weight: bold;">${m.value}</span>
                </div>
                <div style="color: #fff; margin-top: 2px;">å æ¯”: <span style="font-weight: bold;">${m.percent}%</span></div>`}},legend:{orient:"vertical",left:"left",top:"middle",textStyle:{fontSize:12,fontWeight:"bold"}},series:[{name:"ä¸¥é‡ç¨‹åº¦",type:"pie",radius:["40%","70%"],center:["60%","50%"],data:x,emphasis:{itemStyle:{shadowBlur:15,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"},label:{show:!0,fontSize:14,fontWeight:"bold"}},label:{show:!0,formatter:`{b}
{c} ({d}%)`,fontSize:11,fontWeight:"bold"},labelLine:{show:!0,lineStyle:{width:2}}}]}},y=()=>{const x=_();return{title:{text:"ç–²åŠ³è¡Œä¸ºç±»å‹åˆ†å¸ƒ",left:"center",textStyle:{fontSize:16,fontWeight:"bold",color:"#303133"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0, 0, 0, 0.1)"}},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#ccc",borderWidth:1,textStyle:{color:"#fff"},formatter:function(m){const h=m[0];return`<div style="color: #fff; font-weight: bold;">${h.axisValue}</div>
                <div style="margin-top: 4px; color: #fff;">
                  <span style="display: inline-block; width: 12px; height: 12px; background-color: ${h.color}; border-radius: 50%; margin-right: 8px;"></span>
                  è¡Œä¸ºç±»å‹: <span style="font-weight: bold;">${h.value}</span>
                </div>`}},grid:{left:"3%",right:"4%",bottom:"15%",top:"20%",containLabel:!0},xAxis:{type:"category",data:x.labels,axisLabel:{color:"#666",fontSize:11,rotate:45},axisLine:{lineStyle:{color:"#ddd"}}},yAxis:{type:"value",name:"äº‹ä»¶æ•°é‡",nameTextStyle:{color:"#666",fontSize:12},axisLabel:{color:"#666",fontSize:11},axisLine:{lineStyle:{color:"#ddd"}},splitLine:{lineStyle:{color:"#f0f0f0",type:"dashed"}}},series:[{name:"è¡Œä¸ºç±»å‹",type:"bar",data:x.values,itemStyle:{color:"#409EFF",borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:"#337ECC",shadowBlur:10,shadowColor:"#409EFF"}},label:{show:!0,position:"top",formatter:"{c}",fontSize:10,fontWeight:"bold",color:"#409EFF"}}]}},u=()=>{const x=new Array(24).fill(0);return n.data.forEach(m=>{if(m.eventType==="FATIGUE"){const h=new Date(m.timestamp).getHours();x[h]++}}),{labels:Array.from({length:24},(m,h)=>h),values:x}},d=()=>{const x={LOW:0,MEDIUM:0,HIGH:0,CRITICAL:0};n.data.forEach(w=>{w.eventType==="FATIGUE"&&x.hasOwnProperty(w.severity)&&x[w.severity]++});const m={LOW:"#67C23A",MEDIUM:"#E6A23C",HIGH:"#F56C6C",CRITICAL:"#F56C6C"},h={LOW:"è½»å¾®",MEDIUM:"ä¸­ç­‰",HIGH:"ä¸¥é‡",CRITICAL:"å±æ€¥"};return Object.entries(x).filter(([w,A])=>A>0).map(([w,A])=>({value:A,name:h[w],itemStyle:{color:m[w]}}))},_=()=>{const x={};n.data.forEach(h=>{h.eventType==="FATIGUE"&&h.behavior&&(x[h.behavior]=(x[h.behavior]||0)+1)});const m={EYE_CLOSURE:"é—­çœ¼",YAWNING:"æ‰“å“ˆæ¬ ",HEAD_NODDING:"ç‚¹å¤´",DISTRACTED:"åˆ†å¿ƒ",SLEEPY:"å›°å€¦"};return{labels:Object.keys(x).map(h=>m[h]||h),values:Object.values(x)}},C=x=>{o("type-change",x)};return Pe(()=>n.data,()=>{},{deep:!0}),(x,m)=>{const h=D("el-option"),w=D("el-select");return L(),W("div",ts,[r("div",ns,[m[1]||(m[1]=r("h3",null,"ç–²åŠ³è¡Œä¸ºåˆ†æ",-1)),a(w,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=A=>s.value=A),onChange:C,size:"small"},{default:c(()=>[a(h,{label:"å°æ—¶åˆ†å¸ƒ",value:"hourly"}),a(h,{label:"ä¸¥é‡ç¨‹åº¦",value:"severity"}),a(h,{label:"è¡Œä¸ºç±»å‹",value:"behavior"})]),_:1},8,["modelValue"])]),a(H(bn),{class:"chart",option:l.value,loading:e.loading,autoresize:"","canvas-id":"fatigue-analysis-chart"},null,8,["option","loading"])])}}},ss=Ie(os,[["__scopeId","data-v-365605af"]]),as={class:"card-header"},ls={class:"device-info"},rs={class:"info-section"},is={class:"info-grid"},cs={class:"info-item"},us={class:"value"},ds={class:"info-item"},fs={class:"value"},ps={class:"info-item"},ms={class:"value"},vs={class:"info-item"},hs={class:"value"},gs={key:0,class:"info-section"},ys={class:"info-grid"},_s={class:"info-item"},ws={class:"value"},bs={class:"info-item"},Ss={class:"value"},Es={class:"info-item"},Is={class:"value"},Cs={key:1,class:"info-section"},Ts={class:"info-grid"},ks={class:"info-item"},xs={class:"value"},As={class:"info-item"},Ds={class:"value"},Os={class:"info-item"},Ms={class:"value"},Rs={class:"info-item"},$s={class:"value"},Ls={key:2,class:"info-section"},Ps={class:"info-grid"},Fs={class:"info-item"},Ns={class:"value speed-value"},Us={class:"info-item"},zs={class:"value direction-value"},Bs={class:"info-item"},Hs={class:"value satellite-value"},Vs={class:"info-item"},Ws={class:"value"},js={key:3,class:"info-section"},qs={key:4,class:"info-section"},Gs={class:"info-grid"},Ks={class:"info-item"},Js={class:"value"},Ys={class:"info-item"},Xs={class:"value"},Qs={class:"info-item"},Zs={class:"value"},ea={class:"info-item"},ta={class:"value"},na={__name:"DeviceDetailCard",props:{device:{type:Object,required:!0}},setup(e){const t=e,n=Q(()=>t.device.status==="ONLINE"),o=y=>({ONLINE:"success",OFFLINE:"info",LOST:"danger"})[y]||"info",s=y=>({ONLINE:"åœ¨çº¿",OFFLINE:"ç¦»çº¿",LOST:"å¤±è”"})[y]||"æœªçŸ¥",l=y=>y>=80?"#67C23A":y>=60?"#E6A23C":"#F56C6C",i=y=>{if(!y)return"æœªçŸ¥";const u=new Date(y),_=new Date-u,C=Math.floor(_/6e4);if(C<1)return"åˆšåˆš";if(C<60)return`${C}åˆ†é’Ÿå‰`;const x=Math.floor(C/60);return x<24?`${x}å°æ—¶å‰`:u.toLocaleDateString()},f=y=>{if(!y)return"0åˆ†é’Ÿ";const u=Math.floor(y/3600),d=Math.floor(y%3600/60);return u>0?`${u}å°æ—¶${d}åˆ†é’Ÿ`:`${d}åˆ†é’Ÿ`};return(y,u)=>{const d=D("el-tag"),_=D("el-progress"),C=D("el-alert"),x=D("el-card");return L(),ie(x,{class:"device-detail-card",shadow:"hover"},{header:c(()=>[r("div",as,[u[0]||(u[0]=r("span",null,"è®¾å¤‡è¯¦æƒ…",-1)),a(d,{type:o(e.device.status),size:"small"},{default:c(()=>[M(S(s(e.device.status)),1)]),_:1},8,["type"])])]),default:c(()=>[r("div",ls,[r("div",rs,[u[5]||(u[5]=r("h4",null,"åŸºæœ¬ä¿¡æ¯",-1)),r("div",is,[r("div",cs,[u[1]||(u[1]=r("span",{class:"label"},"è®¾å¤‡ID:",-1)),r("span",us,S(e.device.deviceId),1)]),r("div",ds,[u[2]||(u[2]=r("span",{class:"label"},"è®¾å¤‡ç±»å‹:",-1)),r("span",fs,S(e.device.deviceType),1)]),r("div",ps,[u[3]||(u[3]=r("span",{class:"label"},"ç‰ˆæœ¬:",-1)),r("span",ms,S(e.device.version),1)]),r("div",vs,[u[4]||(u[4]=r("span",{class:"label"},"å¥åº·åº¦:",-1)),r("span",hs,[a(_,{percentage:e.device.healthScore||0,color:l(e.device.healthScore),"stroke-width":8,"show-text":!0},null,8,["percentage","color"])])])])]),e.device.user?(L(),W("div",gs,[u[9]||(u[9]=r("h4",null,"ç”¨æˆ·ä¿¡æ¯",-1)),r("div",ys,[r("div",_s,[u[6]||(u[6]=r("span",{class:"label"},"ç”¨æˆ·å:",-1)),r("span",ws,S(e.device.user.username),1)]),r("div",bs,[u[7]||(u[7]=r("span",{class:"label"},"é‚®ç®±:",-1)),r("span",Ss,S(e.device.user.email),1)]),r("div",Es,[u[8]||(u[8]=r("span",{class:"label"},"æ‰‹æœº:",-1)),r("span",Is,S(e.device.user.phone),1)])])])):fe("",!0),e.device.currentLocation?(L(),W("div",Cs,[u[14]||(u[14]=r("h4",null,"ä½ç½®ä¿¡æ¯",-1)),r("div",Ts,[r("div",ks,[u[10]||(u[10]=r("span",{class:"label"},"ç»åº¦:",-1)),r("span",xs,S(e.device.currentLocation.lng?.toFixed(6)),1)]),r("div",As,[u[11]||(u[11]=r("span",{class:"label"},"çº¬åº¦:",-1)),r("span",Ds,S(e.device.currentLocation.lat?.toFixed(6)),1)]),r("div",Os,[u[12]||(u[12]=r("span",{class:"label"},"æµ·æ‹”:",-1)),r("span",Ms,S(e.device.currentLocation.altitude?.toFixed(2))+" m",1)]),r("div",Rs,[u[13]||(u[13]=r("span",{class:"label"},"ç²¾åº¦:",-1)),r("span",$s,S(e.device.currentLocation.hdop?.toFixed(2)),1)])])])):fe("",!0),n.value&&e.device.currentLocation?(L(),W("div",Ls,[u[19]||(u[19]=r("h4",null,"å®æ—¶ä¿¡æ¯",-1)),r("div",Ps,[r("div",Fs,[u[15]||(u[15]=r("span",{class:"label"},"é€Ÿåº¦:",-1)),r("span",Ns,S(e.device.currentLocation.speed?.toFixed(1))+" km/h",1)]),r("div",Us,[u[16]||(u[16]=r("span",{class:"label"},"æ–¹å‘:",-1)),r("span",zs,S(e.device.currentLocation.direction?.toFixed(1))+"Â°",1)]),r("div",Bs,[u[17]||(u[17]=r("span",{class:"label"},"å«æ˜Ÿæ•°:",-1)),r("span",Hs,S(e.device.currentLocation.satellites),1)]),r("div",Vs,[u[18]||(u[18]=r("span",{class:"label"},"æœ€åæ›´æ–°:",-1)),r("span",Ws,S(i(e.device.lastSeen)),1)])])])):fe("",!0),n.value?fe("",!0):(L(),W("div",js,[a(C,{title:"è®¾å¤‡ç¦»çº¿",description:"è®¾å¤‡å½“å‰å¤„äºç¦»çº¿çŠ¶æ€ï¼Œå®æ—¶ä¿¡æ¯ä¸å¯ç”¨",type:"warning",closable:!1,"show-icon":""})])),e.device.statistics?(L(),W("div",qs,[u[24]||(u[24]=r("h4",null,"ç»Ÿè®¡ä¿¡æ¯",-1)),r("div",Gs,[r("div",Ks,[u[20]||(u[20]=r("span",{class:"label"},"ç–²åŠ³äº‹ä»¶:",-1)),r("span",Js,S(e.device.statistics.fatigueEvents||0),1)]),r("div",Ys,[u[21]||(u[21]=r("span",{class:"label"},"åˆ†å¿ƒäº‹ä»¶:",-1)),r("span",Xs,S(e.device.statistics.distractionEvents||0),1)]),r("div",Qs,[u[22]||(u[22]=r("span",{class:"label"},"æ€»é©¾é©¶æ—¶é—´:",-1)),r("span",Zs,S(f(e.device.statistics.totalDrivingTime)),1)]),r("div",ea,[u[23]||(u[23]=r("span",{class:"label"},"æ€»è¡Œé©¶è·ç¦»:",-1)),r("span",ta,S(e.device.statistics.totalDistance?.toFixed(2)||0)+" km",1)])])])):fe("",!0)])]),_:1})}}},oa=Ie(na,[["__scopeId","data-v-bd713d68"]]);function xn(e,t){return function(){return e.apply(t,arguments)}}const{toString:sa}=Object.prototype,{getPrototypeOf:Bt}=Object,{iterator:vt,toStringTag:An}=Symbol,ht=(e=>t=>{const n=sa.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ke=e=>(e=e.toLowerCase(),t=>ht(t)===e),gt=e=>t=>typeof t===e,{isArray:We}=Array,Xe=gt("undefined");function Qe(e){return e!==null&&!Xe(e)&&e.constructor!==null&&!Xe(e.constructor)&&be(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Dn=ke("ArrayBuffer");function aa(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Dn(e.buffer),t}const la=gt("string"),be=gt("function"),On=gt("number"),Ze=e=>e!==null&&typeof e=="object",ra=e=>e===!0||e===!1,it=e=>{if(ht(e)!=="object")return!1;const t=Bt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(An in e)&&!(vt in e)},ia=e=>{if(!Ze(e)||Qe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},ca=ke("Date"),ua=ke("File"),da=ke("Blob"),fa=ke("FileList"),pa=e=>Ze(e)&&be(e.pipe),ma=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||be(e.append)&&((t=ht(e))==="formdata"||t==="object"&&be(e.toString)&&e.toString()==="[object FormData]"))},va=ke("URLSearchParams"),[ha,ga,ya,_a]=["ReadableStream","Request","Response","Headers"].map(ke),wa=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function et(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,s;if(typeof e!="object"&&(e=[e]),We(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{if(Qe(e))return;const l=n?Object.getOwnPropertyNames(e):Object.keys(e),i=l.length;let f;for(o=0;o<i;o++)f=l[o],t.call(null,e[f],f,e)}}function Mn(e,t){if(Qe(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,s;for(;o-- >0;)if(s=n[o],t===s.toLowerCase())return s;return null}const Le=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rn=e=>!Xe(e)&&e!==Le;function Dt(){const{caseless:e}=Rn(this)&&this||{},t={},n=(o,s)=>{const l=e&&Mn(t,s)||s;it(t[l])&&it(o)?t[l]=Dt(t[l],o):it(o)?t[l]=Dt({},o):We(o)?t[l]=o.slice():t[l]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&et(arguments[o],n);return t}const ba=(e,t,n,{allOwnKeys:o}={})=>(et(t,(s,l)=>{n&&be(s)?e[l]=xn(s,n):e[l]=s},{allOwnKeys:o}),e),Sa=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ea=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Ia=(e,t,n,o)=>{let s,l,i;const f={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),l=s.length;l-- >0;)i=s[l],(!o||o(i,e,t))&&!f[i]&&(t[i]=e[i],f[i]=!0);e=n!==!1&&Bt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Ca=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},Ta=e=>{if(!e)return null;if(We(e))return e;let t=e.length;if(!On(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},ka=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Bt(Uint8Array)),xa=(e,t)=>{const o=(e&&e[vt]).call(e);let s;for(;(s=o.next())&&!s.done;){const l=s.value;t.call(e,l[0],l[1])}},Aa=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},Da=ke("HTMLFormElement"),Oa=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),Zt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ma=ke("RegExp"),$n=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};et(n,(s,l)=>{let i;(i=t(s,l,e))!==!1&&(o[l]=i||s)}),Object.defineProperties(e,o)},Ra=e=>{$n(e,(t,n)=>{if(be(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(be(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$a=(e,t)=>{const n={},o=s=>{s.forEach(l=>{n[l]=!0})};return We(e)?o(e):o(String(e).split(t)),n},La=()=>{},Pa=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Fa(e){return!!(e&&be(e.append)&&e[An]==="FormData"&&e[vt])}const Na=e=>{const t=new Array(10),n=(o,s)=>{if(Ze(o)){if(t.indexOf(o)>=0)return;if(Qe(o))return o;if(!("toJSON"in o)){t[s]=o;const l=We(o)?[]:{};return et(o,(i,f)=>{const y=n(i,s+1);!Xe(y)&&(l[f]=y)}),t[s]=void 0,l}}return o};return n(e,0)},Ua=ke("AsyncFunction"),za=e=>e&&(Ze(e)||be(e))&&be(e.then)&&be(e.catch),Ln=((e,t)=>e?setImmediate:t?((n,o)=>(Le.addEventListener("message",({source:s,data:l})=>{s===Le&&l===n&&o.length&&o.shift()()},!1),s=>{o.push(s),Le.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",be(Le.postMessage)),Ba=typeof queueMicrotask<"u"?queueMicrotask.bind(Le):typeof process<"u"&&process.nextTick||Ln,Ha=e=>e!=null&&be(e[vt]),v={isArray:We,isArrayBuffer:Dn,isBuffer:Qe,isFormData:ma,isArrayBufferView:aa,isString:la,isNumber:On,isBoolean:ra,isObject:Ze,isPlainObject:it,isEmptyObject:ia,isReadableStream:ha,isRequest:ga,isResponse:ya,isHeaders:_a,isUndefined:Xe,isDate:ca,isFile:ua,isBlob:da,isRegExp:Ma,isFunction:be,isStream:pa,isURLSearchParams:va,isTypedArray:ka,isFileList:fa,forEach:et,merge:Dt,extend:ba,trim:wa,stripBOM:Sa,inherits:Ea,toFlatObject:Ia,kindOf:ht,kindOfTest:ke,endsWith:Ca,toArray:Ta,forEachEntry:xa,matchAll:Aa,isHTMLForm:Da,hasOwnProperty:Zt,hasOwnProp:Zt,reduceDescriptors:$n,freezeMethods:Ra,toObjectSet:$a,toCamelCase:Oa,noop:La,toFiniteNumber:Pa,findKey:Mn,global:Le,isContextDefined:Rn,isSpecCompliantForm:Fa,toJSONObject:Na,isAsyncFn:Ua,isThenable:za,setImmediate:Ln,asap:Ba,isIterable:Ha};function j(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s,this.status=s.status?s.status:null)}v.inherits(j,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.status}}});const Pn=j.prototype,Fn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Fn[e]={value:e}});Object.defineProperties(j,Fn);Object.defineProperty(Pn,"isAxiosError",{value:!0});j.from=(e,t,n,o,s,l)=>{const i=Object.create(Pn);return v.toFlatObject(e,i,function(y){return y!==Error.prototype},f=>f!=="isAxiosError"),j.call(i,e.message,t,n,o,s),i.cause=e,i.name=e.name,l&&Object.assign(i,l),i};const Va=null;function Ot(e){return v.isPlainObject(e)||v.isArray(e)}function Nn(e){return v.endsWith(e,"[]")?e.slice(0,-2):e}function en(e,t,n){return e?e.concat(t).map(function(s,l){return s=Nn(s),!n&&l?"["+s+"]":s}).join(n?".":""):t}function Wa(e){return v.isArray(e)&&!e.some(Ot)}const ja=v.toFlatObject(v,{},null,function(t){return/^is[A-Z]/.test(t)});function yt(e,t,n){if(!v.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,w){return!v.isUndefined(w[h])});const o=n.metaTokens,s=n.visitor||d,l=n.dots,i=n.indexes,y=(n.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(t);if(!v.isFunction(s))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(v.isDate(m))return m.toISOString();if(v.isBoolean(m))return m.toString();if(!y&&v.isBlob(m))throw new j("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(m)||v.isTypedArray(m)?y&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,h,w){let A=m;if(m&&!w&&typeof m=="object"){if(v.endsWith(h,"{}"))h=o?h:h.slice(0,-2),m=JSON.stringify(m);else if(v.isArray(m)&&Wa(m)||(v.isFileList(m)||v.endsWith(h,"[]"))&&(A=v.toArray(m)))return h=Nn(h),A.forEach(function(F,N){!(v.isUndefined(F)||F===null)&&t.append(i===!0?en([h],N,l):i===null?h:h+"[]",u(F))}),!1}return Ot(m)?!0:(t.append(en(w,h,l),u(m)),!1)}const _=[],C=Object.assign(ja,{defaultVisitor:d,convertValue:u,isVisitable:Ot});function x(m,h){if(!v.isUndefined(m)){if(_.indexOf(m)!==-1)throw Error("Circular reference detected in "+h.join("."));_.push(m),v.forEach(m,function(A,O){(!(v.isUndefined(A)||A===null)&&s.call(t,A,v.isString(O)?O.trim():O,h,C))===!0&&x(A,h?h.concat(O):[O])}),_.pop()}}if(!v.isObject(e))throw new TypeError("data must be an object");return x(e),t}function tn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Ht(e,t){this._pairs=[],e&&yt(e,this,t)}const Un=Ht.prototype;Un.append=function(t,n){this._pairs.push([t,n])};Un.toString=function(t){const n=t?function(o){return t.call(this,o,tn)}:tn;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function qa(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zn(e,t,n){if(!t)return e;const o=n&&n.encode||qa;v.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let l;if(s?l=s(t,n):l=v.isURLSearchParams(t)?t.toString():new Ht(t,n).toString(o),l){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class nn{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){v.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Bn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ga=typeof URLSearchParams<"u"?URLSearchParams:Ht,Ka=typeof FormData<"u"?FormData:null,Ja=typeof Blob<"u"?Blob:null,Ya={isBrowser:!0,classes:{URLSearchParams:Ga,FormData:Ka,Blob:Ja},protocols:["http","https","file","blob","url","data"]},Vt=typeof window<"u"&&typeof document<"u",Mt=typeof navigator=="object"&&navigator||void 0,Xa=Vt&&(!Mt||["ReactNative","NativeScript","NS"].indexOf(Mt.product)<0),Qa=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Za=Vt&&window.location.href||"http://localhost",el=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vt,hasStandardBrowserEnv:Xa,hasStandardBrowserWebWorkerEnv:Qa,navigator:Mt,origin:Za},Symbol.toStringTag,{value:"Module"})),he={...el,...Ya};function tl(e,t){return yt(e,new he.classes.URLSearchParams,{visitor:function(n,o,s,l){return he.isNode&&v.isBuffer(n)?(this.append(o,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function nl(e){return v.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ol(e){const t={},n=Object.keys(e);let o;const s=n.length;let l;for(o=0;o<s;o++)l=n[o],t[l]=e[l];return t}function Hn(e){function t(n,o,s,l){let i=n[l++];if(i==="__proto__")return!0;const f=Number.isFinite(+i),y=l>=n.length;return i=!i&&v.isArray(s)?s.length:i,y?(v.hasOwnProp(s,i)?s[i]=[s[i],o]:s[i]=o,!f):((!s[i]||!v.isObject(s[i]))&&(s[i]=[]),t(n,o,s[i],l)&&v.isArray(s[i])&&(s[i]=ol(s[i])),!f)}if(v.isFormData(e)&&v.isFunction(e.entries)){const n={};return v.forEachEntry(e,(o,s)=>{t(nl(o),s,n,0)}),n}return null}function sl(e,t,n){if(v.isString(e))try{return(t||JSON.parse)(e),v.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const tt={transitional:Bn,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,l=v.isObject(t);if(l&&v.isHTMLForm(t)&&(t=new FormData(t)),v.isFormData(t))return s?JSON.stringify(Hn(t)):t;if(v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t)||v.isReadableStream(t))return t;if(v.isArrayBufferView(t))return t.buffer;if(v.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(l){if(o.indexOf("application/x-www-form-urlencoded")>-1)return tl(t,this.formSerializer).toString();if((f=v.isFileList(t))||o.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return yt(f?{"files[]":t}:t,y&&new y,this.formSerializer)}}return l||s?(n.setContentType("application/json",!1),sl(t)):t}],transformResponse:[function(t){const n=this.transitional||tt.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(v.isResponse(t)||v.isReadableStream(t))return t;if(t&&v.isString(t)&&(o&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(f){if(i)throw f.name==="SyntaxError"?j.from(f,j.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:he.classes.FormData,Blob:he.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],e=>{tt.headers[e]={}});const al=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ll=e=>{const t={};let n,o,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),o=i.substring(s+1).trim(),!(!n||t[n]&&al[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},on=Symbol("internals");function Je(e){return e&&String(e).trim().toLowerCase()}function ct(e){return e===!1||e==null?e:v.isArray(e)?e.map(ct):String(e)}function rl(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const il=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Et(e,t,n,o,s){if(v.isFunction(o))return o.call(this,t,n);if(s&&(t=n),!!v.isString(t)){if(v.isString(o))return t.indexOf(o)!==-1;if(v.isRegExp(o))return o.test(t)}}function cl(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function ul(e,t){const n=v.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(s,l,i){return this[o].call(this,t,s,l,i)},configurable:!0})})}let Se=class{constructor(t){t&&this.set(t)}set(t,n,o){const s=this;function l(f,y,u){const d=Je(y);if(!d)throw new Error("header name must be a non-empty string");const _=v.findKey(s,d);(!_||s[_]===void 0||u===!0||u===void 0&&s[_]!==!1)&&(s[_||y]=ct(f))}const i=(f,y)=>v.forEach(f,(u,d)=>l(u,d,y));if(v.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(v.isString(t)&&(t=t.trim())&&!il(t))i(ll(t),n);else if(v.isObject(t)&&v.isIterable(t)){let f={},y,u;for(const d of t){if(!v.isArray(d))throw TypeError("Object iterator must return a key-value pair");f[u=d[0]]=(y=f[u])?v.isArray(y)?[...y,d[1]]:[y,d[1]]:d[1]}i(f,n)}else t!=null&&l(n,t,o);return this}get(t,n){if(t=Je(t),t){const o=v.findKey(this,t);if(o){const s=this[o];if(!n)return s;if(n===!0)return rl(s);if(v.isFunction(n))return n.call(this,s,o);if(v.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Je(t),t){const o=v.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Et(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let s=!1;function l(i){if(i=Je(i),i){const f=v.findKey(o,i);f&&(!n||Et(o,o[f],f,n))&&(delete o[f],s=!0)}}return v.isArray(t)?t.forEach(l):l(t),s}clear(t){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const l=n[o];(!t||Et(this,this[l],l,t,!0))&&(delete this[l],s=!0)}return s}normalize(t){const n=this,o={};return v.forEach(this,(s,l)=>{const i=v.findKey(o,l);if(i){n[i]=ct(s),delete n[l];return}const f=t?cl(l):String(l).trim();f!==l&&delete n[l],n[f]=ct(s),o[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return v.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=t&&v.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(s=>o.set(s)),o}static accessor(t){const o=(this[on]=this[on]={accessors:{}}).accessors,s=this.prototype;function l(i){const f=Je(i);o[f]||(ul(s,i),o[f]=!0)}return v.isArray(t)?t.forEach(l):l(t),this}};Se.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(Se.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});v.freezeMethods(Se);function It(e,t){const n=this||tt,o=t||n,s=Se.from(o.headers);let l=o.data;return v.forEach(e,function(f){l=f.call(n,l,s.normalize(),t?t.status:void 0)}),s.normalize(),l}function Vn(e){return!!(e&&e.__CANCEL__)}function je(e,t,n){j.call(this,e??"canceled",j.ERR_CANCELED,t,n),this.name="CanceledError"}v.inherits(je,j,{__CANCEL__:!0});function Wn(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new j("Request failed with status code "+n.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function dl(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function fl(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s=0,l=0,i;return t=t!==void 0?t:1e3,function(y){const u=Date.now(),d=o[l];i||(i=u),n[s]=y,o[s]=u;let _=l,C=0;for(;_!==s;)C+=n[_++],_=_%e;if(s=(s+1)%e,s===l&&(l=(l+1)%e),u-i<t)return;const x=d&&u-d;return x?Math.round(C*1e3/x):void 0}}function pl(e,t){let n=0,o=1e3/t,s,l;const i=(u,d=Date.now())=>{n=d,s=null,l&&(clearTimeout(l),l=null),e(...u)};return[(...u)=>{const d=Date.now(),_=d-n;_>=o?i(u,d):(s=u,l||(l=setTimeout(()=>{l=null,i(s)},o-_)))},()=>s&&i(s)]}const ft=(e,t,n=3)=>{let o=0;const s=fl(50,250);return pl(l=>{const i=l.loaded,f=l.lengthComputable?l.total:void 0,y=i-o,u=s(y),d=i<=f;o=i;const _={loaded:i,total:f,progress:f?i/f:void 0,bytes:y,rate:u||void 0,estimated:u&&f&&d?(f-i)/u:void 0,event:l,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(_)},n)},sn=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},an=e=>(...t)=>v.asap(()=>e(...t)),ml=he.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,he.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(he.origin),he.navigator&&/(msie|trident)/i.test(he.navigator.userAgent)):()=>!0,vl=he.hasStandardBrowserEnv?{write(e,t,n,o,s,l){const i=[e+"="+encodeURIComponent(t)];v.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),v.isString(o)&&i.push("path="+o),v.isString(s)&&i.push("domain="+s),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hl(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function gl(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function jn(e,t,n){let o=!hl(t);return e&&(o||n==!1)?gl(e,t):t}const ln=e=>e instanceof Se?{...e}:e;function ze(e,t){t=t||{};const n={};function o(u,d,_,C){return v.isPlainObject(u)&&v.isPlainObject(d)?v.merge.call({caseless:C},u,d):v.isPlainObject(d)?v.merge({},d):v.isArray(d)?d.slice():d}function s(u,d,_,C){if(v.isUndefined(d)){if(!v.isUndefined(u))return o(void 0,u,_,C)}else return o(u,d,_,C)}function l(u,d){if(!v.isUndefined(d))return o(void 0,d)}function i(u,d){if(v.isUndefined(d)){if(!v.isUndefined(u))return o(void 0,u)}else return o(void 0,d)}function f(u,d,_){if(_ in t)return o(u,d);if(_ in e)return o(void 0,u)}const y={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:f,headers:(u,d,_)=>s(ln(u),ln(d),_,!0)};return v.forEach(Object.keys({...e,...t}),function(d){const _=y[d]||s,C=_(e[d],t[d],d);v.isUndefined(C)&&_!==f||(n[d]=C)}),n}const qn=e=>{const t=ze({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:l,headers:i,auth:f}=t;t.headers=i=Se.from(i),t.url=zn(jn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),f&&i.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let y;if(v.isFormData(n)){if(he.hasStandardBrowserEnv||he.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((y=i.getContentType())!==!1){const[u,...d]=y?y.split(";").map(_=>_.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...d].join("; "))}}if(he.hasStandardBrowserEnv&&(o&&v.isFunction(o)&&(o=o(t)),o||o!==!1&&ml(t.url))){const u=s&&l&&vl.read(l);u&&i.set(s,u)}return t},yl=typeof XMLHttpRequest<"u",_l=yl&&function(e){return new Promise(function(n,o){const s=qn(e);let l=s.data;const i=Se.from(s.headers).normalize();let{responseType:f,onUploadProgress:y,onDownloadProgress:u}=s,d,_,C,x,m;function h(){x&&x(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function A(){if(!w)return;const F=Se.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),G={data:!f||f==="text"||f==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:F,config:e,request:w};Wn(function(Z){n(Z),h()},function(Z){o(Z),h()},G),w=null}"onloadend"in w?w.onloadend=A:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(A)},w.onabort=function(){w&&(o(new j("Request aborted",j.ECONNABORTED,e,w)),w=null)},w.onerror=function(){o(new j("Network Error",j.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let N=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const G=s.transitional||Bn;s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),o(new j(N,G.clarifyTimeoutError?j.ETIMEDOUT:j.ECONNABORTED,e,w)),w=null},l===void 0&&i.setContentType(null),"setRequestHeader"in w&&v.forEach(i.toJSON(),function(N,G){w.setRequestHeader(G,N)}),v.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),f&&f!=="json"&&(w.responseType=s.responseType),u&&([C,m]=ft(u,!0),w.addEventListener("progress",C)),y&&w.upload&&([_,x]=ft(y),w.upload.addEventListener("progress",_),w.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(d=F=>{w&&(o(!F||F.type?new je(null,e,w):F),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const O=dl(s.url);if(O&&he.protocols.indexOf(O)===-1){o(new j("Unsupported protocol "+O+":",j.ERR_BAD_REQUEST,e));return}w.send(l||null)})},wl=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,s;const l=function(u){if(!s){s=!0,f();const d=u instanceof Error?u:this.reason;o.abort(d instanceof j?d:new je(d instanceof Error?d.message:d))}};let i=t&&setTimeout(()=>{i=null,l(new j(`timeout ${t} of ms exceeded`,j.ETIMEDOUT))},t);const f=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(l):u.removeEventListener("abort",l)}),e=null)};e.forEach(u=>u.addEventListener("abort",l));const{signal:y}=o;return y.unsubscribe=()=>v.asap(f),y}},bl=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,s;for(;o<n;)s=o+t,yield e.slice(o,s),o=s},Sl=async function*(e,t){for await(const n of El(e))yield*bl(n,t)},El=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},rn=(e,t,n,o)=>{const s=Sl(e,t);let l=0,i,f=y=>{i||(i=!0,o&&o(y))};return new ReadableStream({async pull(y){try{const{done:u,value:d}=await s.next();if(u){f(),y.close();return}let _=d.byteLength;if(n){let C=l+=_;n(C)}y.enqueue(new Uint8Array(d))}catch(u){throw f(u),u}},cancel(y){return f(y),s.return()}},{highWaterMark:2})},_t=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Gn=_t&&typeof ReadableStream=="function",Il=_t&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Kn=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Cl=Gn&&Kn(()=>{let e=!1;const t=new Request(he.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),cn=64*1024,Rt=Gn&&Kn(()=>v.isReadableStream(new Response("").body)),pt={stream:Rt&&(e=>e.body)};_t&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!pt[t]&&(pt[t]=v.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new j(`Response type '${t}' is not supported`,j.ERR_NOT_SUPPORT,o)})})})(new Response);const Tl=async e=>{if(e==null)return 0;if(v.isBlob(e))return e.size;if(v.isSpecCompliantForm(e))return(await new Request(he.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(v.isArrayBufferView(e)||v.isArrayBuffer(e))return e.byteLength;if(v.isURLSearchParams(e)&&(e=e+""),v.isString(e))return(await Il(e)).byteLength},kl=async(e,t)=>{const n=v.toFiniteNumber(e.getContentLength());return n??Tl(t)},xl=_t&&(async e=>{let{url:t,method:n,data:o,signal:s,cancelToken:l,timeout:i,onDownloadProgress:f,onUploadProgress:y,responseType:u,headers:d,withCredentials:_="same-origin",fetchOptions:C}=qn(e);u=u?(u+"").toLowerCase():"text";let x=wl([s,l&&l.toAbortSignal()],i),m;const h=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let w;try{if(y&&Cl&&n!=="get"&&n!=="head"&&(w=await kl(d,o))!==0){let G=new Request(t,{method:"POST",body:o,duplex:"half"}),K;if(v.isFormData(o)&&(K=G.headers.get("content-type"))&&d.setContentType(K),G.body){const[Z,ne]=sn(w,ft(an(y)));o=rn(G.body,cn,Z,ne)}}v.isString(_)||(_=_?"include":"omit");const A="credentials"in Request.prototype;m=new Request(t,{...C,signal:x,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:A?_:void 0});let O=await fetch(m,C);const F=Rt&&(u==="stream"||u==="response");if(Rt&&(f||F&&h)){const G={};["status","statusText","headers"].forEach(oe=>{G[oe]=O[oe]});const K=v.toFiniteNumber(O.headers.get("content-length")),[Z,ne]=f&&sn(K,ft(an(f),!0))||[];O=new Response(rn(O.body,cn,Z,()=>{ne&&ne(),h&&h()}),G)}u=u||"text";let N=await pt[v.findKey(pt,u)||"text"](O,e);return!F&&h&&h(),await new Promise((G,K)=>{Wn(G,K,{data:N,headers:Se.from(O.headers),status:O.status,statusText:O.statusText,config:e,request:m})})}catch(A){throw h&&h(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new j("Network Error",j.ERR_NETWORK,e,m),{cause:A.cause||A}):j.from(A,A&&A.code,e,m)}}),$t={http:Va,xhr:_l,fetch:xl};v.forEach($t,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const un=e=>`- ${e}`,Al=e=>v.isFunction(e)||e===null||e===!1,Jn={getAdapter:e=>{e=v.isArray(e)?e:[e];const{length:t}=e;let n,o;const s={};for(let l=0;l<t;l++){n=e[l];let i;if(o=n,!Al(n)&&(o=$t[(i=String(n)).toLowerCase()],o===void 0))throw new j(`Unknown adapter '${i}'`);if(o)break;s[i||"#"+l]=o}if(!o){const l=Object.entries(s).map(([f,y])=>`adapter ${f} `+(y===!1?"is not supported by the environment":"is not available in the build"));let i=t?l.length>1?`since :
`+l.map(un).join(`
`):" "+un(l[0]):"as no adapter specified";throw new j("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return o},adapters:$t};function Ct(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new je(null,e)}function dn(e){return Ct(e),e.headers=Se.from(e.headers),e.data=It.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Jn.getAdapter(e.adapter||tt.adapter)(e).then(function(o){return Ct(e),o.data=It.call(e,e.transformResponse,o),o.headers=Se.from(o.headers),o},function(o){return Vn(o)||(Ct(e),o&&o.response&&(o.response.data=It.call(e,e.transformResponse,o.response),o.response.headers=Se.from(o.response.headers))),Promise.reject(o)})}const Yn="1.11.0",wt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{wt[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const fn={};wt.transitional=function(t,n,o){function s(l,i){return"[Axios v"+Yn+"] Transitional option '"+l+"'"+i+(o?". "+o:"")}return(l,i,f)=>{if(t===!1)throw new j(s(i," has been removed"+(n?" in "+n:"")),j.ERR_DEPRECATED);return n&&!fn[i]&&(fn[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,i,f):!0}};wt.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function Dl(e,t,n){if(typeof e!="object")throw new j("options must be an object",j.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const l=o[s],i=t[l];if(i){const f=e[l],y=f===void 0||i(f,l,e);if(y!==!0)throw new j("option "+l+" must be "+y,j.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new j("Unknown option "+l,j.ERR_BAD_OPTION)}}const ut={assertOptions:Dl,validators:wt},xe=ut.validators;let Ue=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nn,response:new nn}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?l&&!String(o.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+l):o.stack=l}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ze(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:l}=n;o!==void 0&&ut.assertOptions(o,{silentJSONParsing:xe.transitional(xe.boolean),forcedJSONParsing:xe.transitional(xe.boolean),clarifyTimeoutError:xe.transitional(xe.boolean)},!1),s!=null&&(v.isFunction(s)?n.paramsSerializer={serialize:s}:ut.assertOptions(s,{encode:xe.function,serialize:xe.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ut.assertOptions(n,{baseUrl:xe.spelling("baseURL"),withXsrfToken:xe.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=l&&v.merge(l.common,l[n.method]);l&&v.forEach(["delete","get","head","post","put","patch","common"],m=>{delete l[m]}),n.headers=Se.concat(i,l);const f=[];let y=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(y=y&&h.synchronous,f.unshift(h.fulfilled,h.rejected))});const u=[];this.interceptors.response.forEach(function(h){u.push(h.fulfilled,h.rejected)});let d,_=0,C;if(!y){const m=[dn.bind(this),void 0];for(m.unshift(...f),m.push(...u),C=m.length,d=Promise.resolve(n);_<C;)d=d.then(m[_++],m[_++]);return d}C=f.length;let x=n;for(_=0;_<C;){const m=f[_++],h=f[_++];try{x=m(x)}catch(w){h.call(this,w);break}}try{d=dn.call(this,x)}catch(m){return Promise.reject(m)}for(_=0,C=u.length;_<C;)d=d.then(u[_++],u[_++]);return d}getUri(t){t=ze(this.defaults,t);const n=jn(t.baseURL,t.url,t.allowAbsoluteUrls);return zn(n,t.params,t.paramsSerializer)}};v.forEach(["delete","get","head","options"],function(t){Ue.prototype[t]=function(n,o){return this.request(ze(o||{},{method:t,url:n,data:(o||{}).data}))}});v.forEach(["post","put","patch"],function(t){function n(o){return function(l,i,f){return this.request(ze(f||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}Ue.prototype[t]=n(),Ue.prototype[t+"Form"]=n(!0)});let Ol=class Xn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const o=this;this.promise.then(s=>{if(!o._listeners)return;let l=o._listeners.length;for(;l-- >0;)o._listeners[l](s);o._listeners=null}),this.promise.then=s=>{let l;const i=new Promise(f=>{o.subscribe(f),l=f}).then(s);return i.cancel=function(){o.unsubscribe(l)},i},t(function(l,i,f){o.reason||(o.reason=new je(l,i,f),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Xn(function(s){t=s}),cancel:t}}};function Ml(e){return function(n){return e.apply(null,n)}}function Rl(e){return v.isObject(e)&&e.isAxiosError===!0}const Lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lt).forEach(([e,t])=>{Lt[t]=e});function Qn(e){const t=new Ue(e),n=xn(Ue.prototype.request,t);return v.extend(n,Ue.prototype,t,{allOwnKeys:!0}),v.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Qn(ze(e,s))},n}const ce=Qn(tt);ce.Axios=Ue;ce.CanceledError=je;ce.CancelToken=Ol;ce.isCancel=Vn;ce.VERSION=Yn;ce.toFormData=yt;ce.AxiosError=j;ce.Cancel=ce.CanceledError;ce.all=function(t){return Promise.all(t)};ce.spread=Ml;ce.isAxiosError=Rl;ce.mergeConfig=ze;ce.AxiosHeaders=Se;ce.formToJSON=e=>Hn(v.isHTMLForm(e)?new FormData(e):e);ce.getAdapter=Jn.getAdapter;ce.HttpStatusCode=Lt;ce.default=ce;const{Axios:ji,AxiosError:qi,CanceledError:Gi,isCancel:Ki,CancelToken:Ji,VERSION:Yi,all:Xi,Cancel:Qi,isAxiosError:Zi,spread:ec,toFormData:tc,AxiosHeaders:nc,HttpStatusCode:oc,formToJSON:sc,getAdapter:ac,mergeConfig:lc}=ce,Te=ce.create({baseURL:"http://spacemit.topcoder.fun",timeout:1e4,headers:{"Content-Type":"application/json"}});Te.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("APIè¯·æ±‚:",e.method?.toUpperCase(),e.url),e},e=>(console.error("è¯·æ±‚æ‹¦æˆªå™¨é”™è¯¯:",e),Promise.reject(e)));Te.interceptors.response.use(e=>{const{data:t}=e;if(t.code!==void 0)if(t.code===200||t.code===0){console.log("=== APIå“åº”æ‹¦æˆªå™¨ ==="),console.log("åŸå§‹å“åº”:",t),console.log("data.data:",t.data),console.log("data.data.events:",t.data?.events),console.log("data.data.eventsé•¿åº¦:",t.data?.events?.length);const n=t.data||t;return console.log("æœ€ç»ˆè¿”å›æ•°æ®:",n),console.log("æœ€ç»ˆè¿”å›çš„events:",n.events),console.log("æœ€ç»ˆè¿”å›çš„eventsé•¿åº¦:",n.events?.length),n}else return re.error(t.message||"è¯·æ±‚å¤±è´¥"),Promise.reject(new Error(t.message||"è¯·æ±‚å¤±è´¥"));return t},e=>{console.error("APIå“åº”é”™è¯¯:",e);let t="ç½‘ç»œé”™è¯¯";if(e.response){const{status:n,data:o}=e.response;switch(n){case 401:t="æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•",localStorage.removeItem("auth_token");break;case 403:t="æ‹’ç»è®¿é—®";break;case 404:t="è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨";break;case 500:t="æœåŠ¡å™¨å†…éƒ¨é”™è¯¯";break;default:t=o?.message||`è¯·æ±‚å¤±è´¥ (${n})`}}else e.code==="ECONNABORTED"?t="è¯·æ±‚è¶…æ—¶":e.message&&(t=e.message);return re.error(t),Promise.reject(e)});const Ye={getDevices(e={}){return console.log("=== APIè°ƒç”¨: è·å–è®¾å¤‡åˆ—è¡¨ ==="),console.log("è¯·æ±‚å‚æ•°:",e),Te.get("/api/v1/platform/devices",{params:e})},getDeviceDetail(e){return Te.get(`/api/v1/platform/devices/${e}`)},getDeviceTrack(e,t={}){return Te.get(`/api/v1/platform/devices/${e}/track`,{params:t})},getRealtimeStream(){return Te.get("/api/v1/platform/realtime/stream")},updateDevice(e,t){return console.log("=== APIè°ƒç”¨: æ›´æ–°è®¾å¤‡ä¿¡æ¯ ==="),console.log("è®¾å¤‡ID:",e),console.log("æ›´æ–°æ•°æ®:",t),Te.put(`/api/v1/platform/devices/${e}`,t)}},Wt=Pt("device",()=>{const e=P([]),t=P(null),n=P([]),o=P(!1),s=P(null),l=Q(()=>e.value.filter(A=>A.status==="ONLINE")),i=Q(()=>e.value.filter(A=>A.status==="OFFLINE")),f=Q(()=>({total:e.value.length,online:l.value.length,offline:i.value.length})),y=async(A={})=>{o.value=!0,s.value=null,console.log("=== è®¾å¤‡Store: å¼€å§‹è·å–è®¾å¤‡åˆ—è¡¨ ==="),console.log("å‚æ•°:",A);try{const O=await Ye.getDevices(A);return console.log("è®¾å¤‡APIå“åº”:",O),console.log("å“åº”ä¸­çš„è®¾å¤‡æ•°ç»„:",O.devices),console.log("è®¾å¤‡æ•°ç»„é•¿åº¦:",O.devices?.length),O.devices&&O.devices.length>0?(e.value=O.devices,console.log("è®¾ç½®è®¾å¤‡åˆ—è¡¨:",e.value.length,"ä¸ªè®¾å¤‡"),console.log("æœ€ç»ˆè®¾å¤‡åˆ—è¡¨:",e.value),console.log("ç¬¬ä¸€ä¸ªè®¾å¤‡çš„ç”¨æˆ·å:",e.value[0]?.username),console.log("ç¬¬ä¸€ä¸ªè®¾å¤‡çš„è®¾å¤‡ID:",e.value[0]?.deviceId)):(console.log("APIè¿”å›çš„è®¾å¤‡æ•°ç»„ä¸ºç©ºï¼Œä½¿ç”¨ç©ºæ•°ç»„"),e.value=[]),e.value.length===0&&(console.log("âš ï¸ è­¦å‘Šï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼"),e.value=[{deviceId:"MUSE_PI_PRO_001",deviceType:"MUSE_PI_PRO",version:"1.0.0",status:"ONLINE",healthScore:85,lastSeen:new Date().toISOString(),username:"å¼ ä¸‰",phone:"13800138001",location:{lat:33.553733,lng:119.030953,speed:60,direction:45,altitude:10,hdop:1.2,satellites:8}},{deviceId:"MUSE_PI_PRO_002",deviceType:"MUSE_PI_PRO",version:"1.0.0",status:"ONLINE",healthScore:92,lastSeen:new Date(Date.now()-300*1e3).toISOString(),username:"æå››",phone:"13800138002",location:{lat:33.563733,lng:119.040953,speed:45,direction:90,altitude:15,hdop:.8,satellites:10}},{deviceId:"MUSE_PI_PRO_003",deviceType:"MUSE_PI_PRO",version:"1.0.0",status:"OFFLINE",healthScore:78,lastSeen:new Date(Date.now()-1800*1e3).toISOString(),username:"ç‹äº”",phone:"13800138003",location:{lat:33.543733,lng:119.020953,speed:0,direction:0,altitude:8,hdop:2.1,satellites:6}}]),O}catch(O){console.error("è·å–è®¾å¤‡åˆ—è¡¨å¤±è´¥:",O),s.value=O.message,console.log("APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®"),e.value=[{deviceId:"MUSE_PI_PRO_001",deviceType:"MUSE_PI_PRO",version:"1.0.0",status:"ONLINE",healthScore:85,lastSeen:new Date().toISOString(),username:"å¼ ä¸‰",phone:"13800138001",location:{lat:33.553733,lng:119.030953,speed:60,direction:45,altitude:10,hdop:1.2,satellites:8}},{deviceId:"MUSE_PI_PRO_002",deviceType:"MUSE_PI_PRO",version:"1.0.0",status:"ONLINE",healthScore:92,lastSeen:new Date(Date.now()-300*1e3).toISOString(),username:"æå››",phone:"13800138002",location:{lat:33.563733,lng:119.040953,speed:45,direction:90,altitude:15,hdop:.8,satellites:10}},{deviceId:"MUSE_PI_PRO_003",deviceType:"MUSE_PI_PRO",version:"1.0.0",status:"OFFLINE",healthScore:78,lastSeen:new Date(Date.now()-1800*1e3).toISOString(),username:"ç‹äº”",phone:"13800138003",location:{lat:33.543733,lng:119.020953,speed:0,direction:0,altitude:8,hdop:2.1,satellites:6}}]}finally{o.value=!1}},u=async A=>{o.value=!0,s.value=null;try{const O=await Ye.getDeviceDetail(A);return t.value=O,O}catch(O){throw s.value=O.message,O}finally{o.value=!1}},d=async(A,O={})=>{try{return await Ye.getDeviceTrack(A,O)}catch(F){return s.value=F.message,{track:_(A,O)}}},_=(A,O)=>{const F=[],N=new Date(O.startTime||Date.now()-864e5),G=new Date(O.endTime||Date.now());let K=33.553733,Z=119.030953;const ne=Math.ceil((G-N)/(1e3*60*60));for(let oe=0;oe<ne;oe++){const pe=new Date(N.getTime()+oe*60*60*1e3),ge=K+(Math.random()-.5)*.01,we=Z+(Math.random()-.5)*.01;F.push({timestamp:pe.toISOString(),lat:ge,lng:we,speed:Math.random()*80+20,direction:Math.random()*360,altitude:Math.random()*20+5,hdop:Math.random()*2+.5,satellites:Math.floor(Math.random()*5)+6})}return F};return{devices:e,currentDevice:t,realtimeDevices:n,loading:o,error:s,onlineDevices:l,offlineDevices:i,deviceCount:f,fetchDevices:y,fetchDeviceDetail:u,fetchDeviceTrack:d,fetchRealtimeStream:async()=>{try{const A=await Ye.getRealtimeStream();return n.value=A.devices||[],A}catch(A){throw s.value=A.message,A}},updateDeviceStatus:(A,O)=>{const F=e.value.find(N=>N.deviceId===A);F&&(F.status=O,F.lastSeen=new Date().toISOString())},updateDeviceLocation:(A,O)=>{const F=e.value.find(N=>N.deviceId===A);F&&(F.location=O)},updateDevice:async(A,O)=>{o.value=!0,s.value=null,console.log("=== è®¾å¤‡Store: å¼€å§‹æ›´æ–°è®¾å¤‡ä¿¡æ¯ ==="),console.log("è®¾å¤‡ID:",A),console.log("æ›´æ–°æ•°æ®:",O);try{const F=await Ye.updateDevice(A,O);console.log("æ›´æ–°è®¾å¤‡APIå“åº”:",F);const N=e.value.find(G=>G.deviceId===A);return N&&Object.assign(N,O),F}catch(F){throw console.error("æ›´æ–°è®¾å¤‡å¤±è´¥:",F),s.value=F.message,F}finally{o.value=!1}},clearError:()=>{s.value=null}}}),$l={getOverview(){return Te.get("/api/v1/platform/overview")}},Ll=Pt("overview",()=>{const e=P(null),t=P(!1),n=P(null);return{overview:e,loading:t,error:n,fetchOverview:async()=>{t.value=!0,n.value=null;try{const l=await $l.getOverview();return e.value=l,l}catch(l){throw n.value=l.message,l}finally{t.value=!1}},clearError:()=>{n.value=null}}}),Tt={getEvents(e={}){return console.log("=== APIè°ƒç”¨: è·å–äº‹ä»¶åˆ—è¡¨ ==="),console.log("è¯·æ±‚å‚æ•°:",e),Te.get("/api/v1/platform/events",{params:e})},getEventStatistics(e={}){return Te.get("/api/v1/platform/events/statistics",{params:e})},getDrivingBehaviorAnalysis(e,t={}){return Te.get("/api/v1/platform/analysis/driving-behavior",{params:{deviceId:e,...t}})}},mt=Pt("event",()=>{const e=P([]),t=P(null),n=P(null),o=P(!1),s=P(null),l=Q(()=>({total:e.value.length,fatigue:e.value.filter(h=>h.eventType==="FATIGUE").length,distraction:e.value.filter(h=>h.eventType==="DISTRACTION").length,emergency:e.value.filter(h=>h.eventType==="EMERGENCY").length})),i=Q(()=>({low:e.value.filter(h=>h.severity==="LOW").length,medium:e.value.filter(h=>h.severity==="MEDIUM").length,high:e.value.filter(h=>h.severity==="HIGH").length,critical:e.value.filter(h=>h.severity==="CRITICAL").length})),f=async(h={})=>{o.value=!0,s.value=null,console.log("=== äº‹ä»¶Store: å¼€å§‹è·å–äº‹ä»¶åˆ—è¡¨ ==="),console.log("è¯·æ±‚å‚æ•°:",h);try{const w=await Tt.getEvents(h);return console.log("äº‹ä»¶APIå“åº”:",w),console.log("å“åº”ä¸­çš„äº‹ä»¶æ•°ç»„:",w.events),console.log("äº‹ä»¶æ•°ç»„é•¿åº¦:",w.events?.length),e.value=w.events||[],console.log("è®¾ç½®äº‹ä»¶åˆ—è¡¨:",e.value.length,"ä¸ªäº‹ä»¶"),console.log("æœ€ç»ˆäº‹ä»¶åˆ—è¡¨:",e.value),w}catch(w){console.error("è·å–äº‹ä»¶åˆ—è¡¨å¤±è´¥:",w),s.value=w.message,console.log("APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®");const A=y(h);return e.value=A,{events:A}}finally{o.value=!1}},y=h=>{const w=[],A=h.deviceId||"MUSE_PI_PRO_001",O=["FATIGUE","DISTRACTION","EMERGENCY"],F=["LOW","MEDIUM","HIGH","CRITICAL"];for(let N=0;N<5;N++){const G=new Date(Date.now()-Math.random()*24*60*60*1e3),K=O[Math.floor(Math.random()*O.length)],Z=F[Math.floor(Math.random()*F.length)],ne=33.553733+(Math.random()-.5)*.01,oe=119.030953+(Math.random()-.5)*.01;w.push({eventId:`EVENT_${Date.now()}_${N}`,deviceId:A,eventType:K,severity:Z,confidence:Math.random()*.4+.6,duration:Math.floor(Math.random()*30)+5,timestamp:G.toISOString(),location:{lat:ne,lng:oe,altitude:Math.random()*20+5},behavior:u(K),context:d(K,Z)})}return w.sort((N,G)=>new Date(G.timestamp)-new Date(N.timestamp))},u=h=>{const A={FATIGUE:["é¢‘ç¹çœ¨çœ¼","å¤´éƒ¨ä¸‹å‚","æ‰“å“ˆæ¬ ","æ³¨æ„åŠ›ä¸é›†ä¸­"],DISTRACTION:["çœ‹æ‰‹æœº","è½¬å¤´è¯´è¯","åƒä¸œè¥¿","è°ƒæ•´è®¾å¤‡"],EMERGENCY:["æ€¥åˆ¹è½¦","æ€¥è½¬å¼¯","åç¦»è½¦é“","ç¢°æ’é¢„è­¦"]}[h]||["æœªçŸ¥è¡Œä¸º"];return A[Math.floor(Math.random()*A.length)]},d=(h,w)=>({FATIGUE:{LOW:"è½»å¾®ç–²åŠ³ï¼Œå»ºè®®é€‚å½“ä¼‘æ¯",MEDIUM:"ä¸­åº¦ç–²åŠ³ï¼Œå»ºè®®ç«‹å³ä¼‘æ¯",HIGH:"ä¸¥é‡ç–²åŠ³ï¼Œå­˜åœ¨å®‰å…¨éšæ‚£",CRITICAL:"æåº¦ç–²åŠ³ï¼Œç«‹å³åœè½¦ä¼‘æ¯"},DISTRACTION:{LOW:"è½»å¾®åˆ†å¿ƒï¼Œæ³¨æ„é©¾é©¶å®‰å…¨",MEDIUM:"ä¸­åº¦åˆ†å¿ƒï¼Œå½±å“é©¾é©¶å®‰å…¨",HIGH:"ä¸¥é‡åˆ†å¿ƒï¼Œå­˜åœ¨ç¢°æ’é£é™©",CRITICAL:"æåº¦åˆ†å¿ƒï¼Œç«‹å³åœæ­¢é©¾é©¶"},EMERGENCY:{LOW:"è½»å¾®ç´§æ€¥æƒ…å†µï¼Œæ³¨æ„è§‚å¯Ÿ",MEDIUM:"ä¸­åº¦ç´§æ€¥æƒ…å†µï¼Œè°¨æ…é©¾é©¶",HIGH:"ä¸¥é‡ç´§æ€¥æƒ…å†µï¼Œç«‹å³å¤„ç†",CRITICAL:"æåº¦ç´§æ€¥æƒ…å†µï¼Œç«‹å³åœè½¦"}})[h]?.[w]||"äº‹ä»¶è¯¦æƒ…";return{events:e,eventStatistics:t,drivingBehaviorAnalysis:n,loading:o,error:s,eventCount:l,severityCount:i,fetchEvents:f,fetchEventStatistics:async(h={})=>{try{const w=await Tt.getEventStatistics(h);return t.value=w,w}catch(w){throw s.value=w.message,w}},fetchDrivingBehaviorAnalysis:async(h,w={})=>{try{const A=await Tt.getDrivingBehaviorAnalysis(h,w);return n.value=A,A}catch(A){throw s.value=A.message,A}},addEvent:h=>{e.value.unshift(h)},clearError:()=>{s.value=null}}}),Pl={class:"dashboard"},Fl={class:"admin-toggle"},Nl={class:"status-indicator"},Ul={class:"indicator-header"},zl={class:"status-info"},Bl={class:"status-item"},Hl={class:"status-item"},Vl={class:"update-time"},Wl={class:"status-indicator"},jl={class:"indicator-header"},ql={class:"event-stream"},Gl={class:"stream-info"},Kl={class:"stream-item"},Jl={class:"event-count"},Yl={class:"stream-item"},Xl={class:"processing-speed"},Ql={class:"indicator-header"},Zl={key:0,class:"alert-badge"},er={class:"alert-info"},tr={class:"alert-item"},nr={class:"alert-item"},or={class:"response-time"},sr={class:"card-header"},ar={class:"header-actions"},lr={class:"map-stats"},rr={class:"card-header"},ir={class:"alert-header-badge"},cr={key:0,class:"critical-indicator"},ur={class:"alert-list"},dr=["onClick"],fr={class:"alert-icon"},pr={class:"alert-content"},mr={class:"alert-title"},vr={class:"alert-meta"},hr={class:"alert-device"},gr={class:"alert-time"},yr={class:"alert-severity"},_r={key:0,class:"no-alerts"},wr={class:"card-header"},br={class:"header-actions"},Sr={key:0},Er={key:1,class:"text-muted"},Ir={class:"card-header"},Cr={class:"device-status-grid"},Tr=["onClick"],kr={class:"device-info"},xr={class:"device-id"},Ar={class:"device-user"},Dr={class:"device-status"},Or={class:"device-time"},Mr=Object.assign({name:"DashboardView"},{__name:"Dashboard",setup(e){const t=Ft(),n=Wt(),o=Ll(),s=mt(),l=P({}),i=P([]),f=P(""),y=P(""),u=P(!1),d=P(!1),_=P(!1),C=P([]),x=P([]),m=P(!1),h=P("åˆšåˆš"),w=P(0),A=P(150),O=P(0),F=P(2.5),N=P({apiKey:"",securityKey:"",version:"1.4.15"}),G=P(null),K=P(null),Z=Q(()=>{console.log("è®¡ç®—filteredDevicesï¼Œå½“å‰è®¾å¤‡æ•°é‡:",n.devices.length),console.log("è®¾å¤‡åˆ—è¡¨:",n.devices),console.log("æœç´¢å…³é”®è¯:",f.value),console.log("åœ°å›¾çŠ¶æ€ç­›é€‰:",y.value);let T=n.devices;if(f.value){const g=f.value.toLowerCase();T=T.filter(J=>J.deviceId.toLowerCase().includes(g)||J.username&&J.username.toLowerCase().includes(g))}return y.value&&(T=T.filter(g=>g.status===y.value)),console.log("è¿‡æ»¤åè®¾å¤‡æ•°é‡:",T.length),T}),ne=Q(()=>m.value&&l.value.deviceStatus?.online>0?"healthy":m.value?"warning":"error"),oe=Q(()=>n.devices.filter(T=>T.status==="ONLINE").length),pe=Q(()=>n.devices.filter(T=>T.status==="OFFLINE"||T.status==="LOST").length),ge=async()=>{try{console.log("=== å¼€å§‹å¹¶è¡ŒåŠ è½½æ•°æ® ==="),_.value=!0,await Promise.all([we(),me(),E(),p(),ee()]),console.log("=== æ•°æ®åŠ è½½å®Œæˆ ===")}catch(T){console.error("åŠ è½½æ•°æ®å¤±è´¥:",T),re.error("åŠ è½½æ•°æ®å¤±è´¥")}finally{_.value=!1}},we=async()=>{try{const T=await o.fetchOverview();l.value=T}catch(T){console.error("åŠ è½½æ¦‚è§ˆæ•°æ®å¤±è´¥:",T)}},me=async()=>{try{console.log("=== Dashboard: å¼€å§‹åŠ è½½è®¾å¤‡åˆ—è¡¨ ==="),await n.fetchDevices(),console.log("=== Dashboard: è®¾å¤‡åˆ—è¡¨åŠ è½½å®Œæˆ ==="),console.log("å½“å‰è®¾å¤‡æ•°é‡:",n.devices.length),console.log("è®¾å¤‡åˆ—è¡¨:",n.devices),n.devices.length>0&&(console.log("ç¬¬ä¸€ä¸ªè®¾å¤‡è¯¦æƒ…:",n.devices[0]),console.log("ç¬¬ä¸€ä¸ªè®¾å¤‡ç”¨æˆ·å:",n.devices[0].username),console.log("ç¬¬ä¸€ä¸ªè®¾å¤‡ID:",n.devices[0].deviceId))}catch(T){console.error("åŠ è½½è®¾å¤‡åˆ—è¡¨å¤±è´¥:",T)}},E=async()=>{try{console.log("=== å¼€å§‹åŠ è½½å®æ—¶æ•°æ® ===");const T=await n.fetchRealtimeStream();console.log("å®æ—¶æ•°æ®å“åº”:",T),i.value=T.devices||[],console.log("è®¾ç½®å®æ—¶è®¾å¤‡æ•°é‡:",i.value.length),console.log("å®æ—¶è®¾å¤‡åˆ—è¡¨:",i.value)}catch(T){console.error("åŠ è½½å®æ—¶æ•°æ®å¤±è´¥:",T),T.code==="ERR_NETWORK"||T.message==="Network Error"?console.log("ç½‘ç»œé”™è¯¯ï¼Œå®æ—¶æ•°æ®æµAPIå¯èƒ½ä¸å¯ç”¨ï¼Œä½¿ç”¨è®¾å¤‡åˆ—è¡¨ä½œä¸ºå¤‡é€‰"):console.log("å…¶ä»–é”™è¯¯ï¼Œä½¿ç”¨è®¾å¤‡åˆ—è¡¨ä½œä¸ºå¤‡é€‰"),i.value=n.devices||[]}},p=async()=>{try{console.log("=== å¼€å§‹åŠ è½½äº‹ä»¶æ•°æ® ===");const T=mt(),g={startTime:new Date(Date.now()-10080*60*1e3).toISOString(),endTime:new Date().toISOString()};console.log("äº‹ä»¶æŸ¥è¯¢å‚æ•°:",g);const J=await T.fetchEvents(g);C.value=J.events||[],console.log("äº‹ä»¶æ•°æ®åŠ è½½å®Œæˆ:",C.value.length,"ä¸ªäº‹ä»¶"),console.log("äº‹ä»¶æ•°æ®è¯¦æƒ…:",C.value);const q={};C.value.forEach(V=>{q[V.eventType]=(q[V.eventType]||0)+1}),console.log("äº‹ä»¶ç±»å‹ç»Ÿè®¡:",q)}catch(T){console.error("åŠ è½½äº‹ä»¶æ•°æ®å¤±è´¥:",T),C.value=[],re.warning("äº‹ä»¶æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥")}},ee=async()=>{try{console.log("=== å¼€å§‹åŠ è½½æ´»è·ƒå‘Šè­¦ ==="),x.value=[{alertId:"ALERT_001",deviceId:"MUSE_PI_PRO_001",timestamp:new Date(Date.now()-1e3*60*5).toISOString(),message:"é©¾é©¶å‘˜å‡ºç°ç–²åŠ³çŠ¶æ€",severity:"HIGH",alertType:"FATIGUE_HIGH"}],console.log("æ´»è·ƒå‘Šè­¦åŠ è½½å®Œæˆ:",x.value.length,"ä¸ªå‘Šè­¦")}catch(T){console.error("åŠ è½½æ´»è·ƒå‘Šè­¦å¤±è´¥:",T),x.value=[]}},te=()=>{E()},I=()=>{me()},R=()=>{console.log("æ›´æ–°åœ°å›¾ç­›é€‰:",y.value)},b=()=>{d.value=!d.value,re({message:d.value?"å·²è¿›å…¥ç®¡ç†æ¨¡å¼":"å·²é€€å‡ºç®¡ç†æ¨¡å¼",type:d.value?"warning":"info",duration:2e3})},k=async T=>{console.log("äº‹ä»¶å‘¨æœŸå˜åŒ–:",T);try{const g=new Date;let J;switch(T){case"today":J=new Date(g.getFullYear(),g.getMonth(),g.getDate());break;case"week":J=new Date(g.getTime()-10080*60*1e3);break;case"month":J=new Date(g.getTime()-720*60*60*1e3);break;default:J=new Date(g.getTime()-10080*60*1e3)}const q={startTime:J.toISOString(),endTime:g.toISOString()};console.log("é‡æ–°åŠ è½½äº‹ä»¶æ•°æ®ï¼Œå‚æ•°:",q);const V=await s.fetchEvents(q);C.value=V.events||[],console.log(`åŠ è½½${T}äº‹ä»¶æ•°æ®å®Œæˆ:`,C.value.length,"ä¸ªäº‹ä»¶")}catch(g){console.error("é‡æ–°åŠ è½½äº‹ä»¶æ•°æ®å¤±è´¥:",g),re.error("é‡æ–°åŠ è½½äº‹ä»¶æ•°æ®å¤±è´¥")}},$=async T=>{console.log("ç–²åŠ³åˆ†æç±»å‹å˜åŒ–:",T);try{const g={eventType:"FATIGUE",startTime:new Date(Date.now()-6048e5).toISOString(),endTime:new Date().toISOString()};console.log("é‡æ–°åŠ è½½ç–²åŠ³äº‹ä»¶æ•°æ®ï¼Œå‚æ•°:",g);const q=(await s.fetchEvents(g)).events?.filter(V=>V.eventType==="FATIGUE")||[];C.value=C.value.filter(V=>V.eventType!=="FATIGUE").concat(q),console.log(`åŠ è½½${T}ç–²åŠ³æ•°æ®å®Œæˆ:`,q.length,"ä¸ªç–²åŠ³äº‹ä»¶")}catch(g){console.error("é‡æ–°åŠ è½½ç–²åŠ³æ•°æ®å¤±è´¥:",g),re.error("é‡æ–°åŠ è½½ç–²åŠ³æ•°æ®å¤±è´¥")}},U=T=>{if(!T)return"æœªçŸ¥";const g=new Date(T),q=new Date-g,V=Math.floor(q/6e4);if(V<1)return"åˆšåˆš";if(V<60)return`${V}åˆ†é’Ÿå‰`;const le=Math.floor(V/60);return le<24?`${le}å°æ—¶å‰`:g.toLocaleDateString()},Y=T=>({LOW:"è½»å¾®",MEDIUM:"ä¸­ç­‰",HIGH:"ä¸¥é‡",CRITICAL:"å±æ€¥"})[T]||"æœªçŸ¥",X=T=>({LOW:"success",MEDIUM:"warning",HIGH:"danger",CRITICAL:"danger"})[T]||"info",de=T=>({LOW:"Check",MEDIUM:"Warning",HIGH:"Bell",CRITICAL:"Bell"})[T]||"Check",Ee=T=>{console.log("ç‚¹å‡»å‘Šè­¦:",T),re.info(`æŸ¥çœ‹å‘Šè­¦è¯¦æƒ…: ${T.message}`)},Oe=T=>{console.log("è®¾å¤‡ç‚¹å‡»:",T),K.value=T,T.deviceId&&qe(T.deviceId)},qe=async T=>{try{console.log("åŠ è½½è®¾å¤‡è¯¦æƒ…:",T);const g=await n.fetchDeviceDetail(T);console.log("è®¾å¤‡è¯¦æƒ…:",g),K.value&&K.value.deviceId===T&&(K.value={...K.value,...g})}catch(g){console.error("åŠ è½½è®¾å¤‡è¯¦æƒ…å¤±è´¥:",g),re.error("åŠ è½½è®¾å¤‡è¯¦æƒ…å¤±è´¥")}},ve=T=>{console.log("åœ°å›¾å‡†å¤‡å°±ç»ª:",T)},Ge=T=>{ae(T)},ae=T=>{t.push(`/devices/${T.deviceId}`)},ot=()=>{N.value.apiKey=localStorage.getItem("amap_api_key")||"",N.value.securityKey=localStorage.getItem("amap_security_key")||"",N.value.version=localStorage.getItem("amap_version")||"1.4.15",u.value=!0},B=()=>{if(!N.value.apiKey.trim()){re.warning("è¯·è¾“å…¥API Key");return}localStorage.setItem("amap_api_key",N.value.apiKey),localStorage.setItem("amap_security_key",N.value.securityKey),localStorage.setItem("amap_version",N.value.version),u.value=!1,re.success("åœ°å›¾é…ç½®å·²ä¿å­˜"),setTimeout(()=>{window.location.reload()},1e3)},Me=T=>{if(!T)return"æœªçŸ¥";const g=new Date(T),q=new Date-g,V=Math.floor(q/6e4);if(V<1)return"åˆšåˆš";if(V<60)return`${V}åˆ†é’Ÿå‰`;const le=Math.floor(V/60);return le<24?`${le}å°æ—¶å‰`:g.toLocaleDateString()},jt=T=>{console.log("æ”¶åˆ°å®æ—¶æ•°æ®æ¨é€:",T);const{type:g,payload:J}=T;if(g==="realtime_data"){const{deviceId:q,data:V,timestamp:le}=J,ue=i.value.find(ye=>ye.deviceId===q);if(ue){const ye=ue.location,Re=V.location;if(Object.assign(ue,{location:V.location,speed:V.speed,direction:V.direction,fatigueLevel:V.fatigueLevel,fatigueScore:V.fatigueScore,lastSeen:new Date(le).toISOString()}),ye&&Re){const Ae=Math.abs(Re.lat-ye.lat),lt=Math.abs(Re.lng-ye.lng),Be=1e-4;(Ae>Be||lt>Be)&&(console.log(`è®¾å¤‡ ${q} ä½ç½®å‘ç”Ÿæ˜¾è‘—å˜åŒ–:`,{from:ye,to:Re,latDiff:Ae,lngDiff:lt}),re.info(`è®¾å¤‡ ${q} ä½ç½®å·²æ›´æ–°`))}}else i.value.push({deviceId:q,...V,lastSeen:new Date(le).toISOString()}),console.log(`æ–°è®¾å¤‡ ${q} ä¸Šçº¿`),re.success(`æ–°è®¾å¤‡ ${q} å·²ä¸Šçº¿`);G.value&&G.value.updateMarkers(),st()}},qt=T=>{console.log("æ”¶åˆ°è®¾å¤‡çŠ¶æ€æ›´æ–°:",T);const{type:g,payload:J}=T;if(g==="device_status"){const{deviceId:q,status:V,timestamp:le}=J,ue=i.value.find(ye=>ye.deviceId===q);ue&&(ue.status=V,ue.lastSeen=new Date(le).toISOString()),re.info(`è®¾å¤‡ ${q} çŠ¶æ€å˜æ›´ä¸º ${V}`)}},Gt=T=>{console.log("æ”¶åˆ°å‘Šè­¦æ¨é€:",T);const{type:g,payload:J}=T;if(g==="alert"){const{alertType:q,message:V,severity:le}=J;re({type:{CRITICAL:"error",HIGH:"warning",MEDIUM:"info",LOW:"success"}[le]||"warning",message:`${q}: ${V}`,duration:le==="CRITICAL"?0:5e3,showClose:!0}),(le==="CRITICAL"||le==="HIGH")&&eo(le)}},Kt=T=>{console.log("æ”¶åˆ°äº‹ä»¶é€šçŸ¥:",T);const{type:g,payload:J}=T;if(g==="event"){const{eventType:q}=J;if(l.value.eventSummary){const V=new Date().toDateString();l.value.eventSummary[V]||(l.value.eventSummary[V]={total:0,fatigue:0,distraction:0,emergency:0}),l.value.eventSummary[V].total++,l.value.eventSummary[V][q.toLowerCase()]++}}},eo=T=>{try{new Audio(`/static/audio/alert_${T.toLowerCase()}.mp3`).play().catch(J=>{console.log("æ— æ³•æ’­æ”¾å‘Šè­¦å£°éŸ³:",J)})}catch(g){console.log("å‘Šè­¦å£°éŸ³æ–‡ä»¶ä¸å­˜åœ¨:",g)}},st=()=>{h.value="åˆšåˆš",w.value=C.value.length,O.value=x.value.filter(T=>T.severity==="CRITICAL"||T.severity==="HIGH").length,A.value=Math.floor(Math.random()*50)+100,F.value=(Math.random()*2+1).toFixed(1)},at=T=>{m.value=T,console.log("WebSocketçŠ¶æ€å˜åŒ–:",T?"å·²è¿æ¥":"å·²æ–­å¼€")};return He(async()=>{console.log("=== Dashboardç»„ä»¶å·²æŒ‚è½½ ==="),console.log("å¼€å§‹åŠ è½½æ•°æ®..."),console.log("å½“å‰æ—¶é—´:",new Date().toISOString());try{await ge(),st(),console.log("=== Dashboardæ•°æ®åŠ è½½å®Œæˆ ===")}catch(J){console.error("=== Dashboardæ•°æ®åŠ è½½å¤±è´¥ ===",J)}console.log("å¼€å§‹è¿æ¥WebSocket...");try{se.connect(),console.log("WebSocketè¿æ¥è¯·æ±‚å·²å‘é€")}catch(J){console.error("WebSocketè¿æ¥å¤±è´¥:",J)}se.on("connected",at),se.on("disconnected",at),se.on("realtime_data",jt),se.on("device_status",qt),se.on("alert",Gt),se.on("event",Kt),m.value=se.getConnectionStatus().isConnected;const T=setInterval(()=>{console.log("=== å®šæ—¶åˆ·æ–°å®æ—¶æ•°æ® ==="),me(),st()},3e4),g=setInterval(()=>{st()},5e3);Ve(()=>{clearInterval(T),clearInterval(g),se.off("connected",at),se.off("disconnected",at),se.off("realtime_data",jt),se.off("device_status",qt),se.off("alert",Gt),se.off("event",Kt)})}),(T,g)=>{const J=D("el-button"),q=D("el-col"),V=D("el-row"),le=D("el-tag"),ue=D("el-icon"),ye=D("el-option"),Re=D("el-select"),Ae=D("el-card"),lt=D("el-badge"),Be=D("el-input"),$e=D("el-table-column"),to=D("el-table"),bt=D("el-form-item"),no=D("el-form"),oo=D("el-dialog"),so=Nt("loading");return L(),W("div",Pl,[r("div",Fl,[a(J,{type:d.value?"danger":"primary",icon:d.value?"Lock":"Unlock",onClick:b,size:"small"},{default:c(()=>[M(S(d.value?"é€€å‡ºç®¡ç†":"ç®¡ç†æ¨¡å¼"),1)]),_:1},8,["type","icon"])]),a(V,{gutter:20,class:"overview-section"},{default:c(()=>[a(q,{xs:12,sm:6,md:6,lg:6,xl:6},{default:c(()=>[a(rt,{title:"è®¾å¤‡æ€»æ•°",value:l.value.deviceStatus?.total||0,icon:"Monitor",color:"primary",suffix:"å°",highlight:!0},null,8,["value"])]),_:1}),a(q,{xs:12,sm:6,md:6,lg:6,xl:6},{default:c(()=>[a(rt,{title:"ç¦»çº¿è®¾å¤‡",value:l.value.deviceStatus?.offline||0,icon:"CircleClose",color:"warning",suffix:"å°",pulse:l.value.deviceStatus?.offline>0},null,8,["value","pulse"])]),_:1}),a(q,{xs:12,sm:6,md:6,lg:6,xl:6},{default:c(()=>[a(rt,{title:"ä»Šæ—¥äº‹ä»¶",value:l.value.eventSummary?.today?.total||0,icon:"Warning",color:"primary",suffix:"èµ·",pulse:l.value.eventSummary?.today?.total>0},null,8,["value","pulse"])]),_:1}),a(q,{xs:12,sm:6,md:6,lg:6,xl:6},{default:c(()=>[a(rt,{title:"æ´»è·ƒå‘Šè­¦",value:l.value.alertSummary?.active||0,icon:"Bell",color:"danger",suffix:"æ¡",pulse:l.value.alertSummary?.active>0,highlight:l.value.alertSummary?.active>0,urgent:l.value.alertSummary?.active>0},null,8,["value","pulse","highlight","urgent"])]),_:1})]),_:1}),a(V,{gutter:20,class:"status-indicators"},{default:c(()=>[a(q,{xs:24,sm:8,md:8,lg:8,xl:8},{default:c(()=>[r("div",Nl,[r("div",Ul,[g[8]||(g[8]=r("span",null,"ç³»ç»ŸçŠ¶æ€",-1)),r("div",{class:Ce(["status-dot",ne.value])},[...g[7]||(g[7]=[r("div",{class:"pulse-ring"},null,-1)])],2)]),r("div",zl,[r("div",Bl,[g[9]||(g[9]=r("span",null,"WebSocketè¿æ¥",-1)),a(le,{type:m.value?"success":"danger",size:"small"},{default:c(()=>[M(S(m.value?"å·²è¿æ¥":"æ–­å¼€"),1)]),_:1},8,["type"])]),r("div",Hl,[g[10]||(g[10]=r("span",null,"æ•°æ®æ›´æ–°",-1)),r("span",Vl,S(h.value),1)])])])]),_:1}),a(q,{xs:24,sm:8,md:8,lg:8,xl:8},{default:c(()=>[r("div",Wl,[r("div",jl,[g[11]||(g[11]=r("span",null,"å®æ—¶äº‹ä»¶æµ",-1)),r("div",ql,[(L(),W(Fe,null,Ne(5,z=>r("div",{class:"stream-dot",key:z,style:ao({animationDelay:`${z*.2}s`})},null,4)),64))])]),r("div",Gl,[r("div",Kl,[g[12]||(g[12]=r("span",null,"æœ€è¿‘äº‹ä»¶",-1)),r("span",Jl,S(w.value),1)]),r("div",Yl,[g[13]||(g[13]=r("span",null,"å¤„ç†é€Ÿåº¦",-1)),r("span",Xl,S(A.value)+"ms",1)])])])]),_:1}),a(q,{xs:24,sm:8,md:8,lg:8,xl:8},{default:c(()=>[r("div",{class:Ce(["status-indicator alert-indicator",{"has-critical-alerts":O.value>0}])},[r("div",Ql,[g[14]||(g[14]=r("span",null,"å‘Šè­¦ç›‘æ§",-1)),r("div",{class:Ce(["alert-monitor",{"has-alerts":x.value.length>0}])},[a(ue,null,{default:c(()=>[a(H(kt))]),_:1}),O.value>0?(L(),W("div",Zl,S(O.value),1)):fe("",!0)],2)]),r("div",er,[r("div",tr,[g[15]||(g[15]=r("span",null,"ä¸¥é‡å‘Šè­¦",-1)),r("span",{class:Ce(["critical-count",{critical:O.value>0}])},S(O.value),3)]),r("div",nr,[g[16]||(g[16]=r("span",null,"å“åº”æ—¶é—´",-1)),r("span",or,S(F.value)+"s",1)])])],2)]),_:1})]),_:1}),a(V,{gutter:20,class:"monitoring-section"},{default:c(()=>[a(q,{xs:24,sm:24,md:12,lg:12,xl:12},{default:c(()=>[a(Ae,{class:"map-section",shadow:"hover"},{header:c(()=>[r("div",sr,[g[19]||(g[19]=r("span",null,"å®æ—¶è®¾å¤‡ç›‘æ§",-1)),r("div",ar,[r("div",lr,[a(le,{size:"small",type:"success"},{default:c(()=>[M("åœ¨çº¿ "+S(oe.value),1)]),_:1}),a(le,{size:"small",type:"warning"},{default:c(()=>[M("ç¦»çº¿ "+S(pe.value),1)]),_:1})]),a(Re,{modelValue:y.value,"onUpdate:modelValue":g[0]||(g[0]=z=>y.value=z),placeholder:"ç­›é€‰è®¾å¤‡çŠ¶æ€",size:"small",clearable:"",style:{"margin-right":"10px",width:"150px"},onChange:R},{default:c(()=>[a(ye,{label:"å…¨éƒ¨è®¾å¤‡",value:""}),a(ye,{label:"åœ¨çº¿è®¾å¤‡",value:"ONLINE"}),a(ye,{label:"ç¦»çº¿è®¾å¤‡",value:"OFFLINE"}),a(ye,{label:"å¤±è”è®¾å¤‡",value:"LOST"})]),_:1},8,["modelValue"]),a(J,{size:"small",onClick:te},{default:c(()=>[a(ue,null,{default:c(()=>[a(H(De))]),_:1}),g[17]||(g[17]=M(" åˆ·æ–° ",-1))]),_:1}),d.value?(L(),ie(J,{key:0,size:"small",onClick:ot},{default:c(()=>[a(ue,null,{default:c(()=>[a(H(zt))]),_:1}),g[18]||(g[18]=M(" é…ç½® ",-1))]),_:1})):fe("",!0)])])]),default:c(()=>[a(Xo,{ref_key:"mapComponent",ref:G,devices:Z.value,onDeviceClick:Oe,onMapReady:ve},null,8,["devices"])]),_:1})]),_:1}),K.value?(L(),ie(q,{key:0,xs:24,sm:24,md:12,lg:12,xl:12},{default:c(()=>[a(oa,{device:K.value},null,8,["device"])]),_:1})):fe("",!0),a(q,{xs:24,sm:24,md:12,lg:12,xl:12},{default:c(()=>[a(V,{gutter:20,class:"charts-row"},{default:c(()=>[a(q,{span:24},{default:c(()=>[a(Ae,{class:"chart-card",shadow:"hover"},{header:c(()=>[...g[20]||(g[20]=[r("span",null,"äº‹ä»¶è¶‹åŠ¿",-1)])]),default:c(()=>[a(kn,{data:C.value,loading:_.value,onPeriodChange:k},null,8,["data","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(V,{gutter:20,class:"analysis-section"},{default:c(()=>[a(q,{xs:24,sm:24,md:12,lg:12,xl:12},{default:c(()=>[a(Ae,{class:"chart-card",shadow:"hover"},{header:c(()=>[...g[21]||(g[21]=[r("span",null,"ç–²åŠ³è¡Œä¸ºåˆ†æ",-1)])]),default:c(()=>[a(ss,{data:C.value,loading:_.value,onTypeChange:$},null,8,["data","loading"])]),_:1})]),_:1}),a(q,{xs:24,sm:24,md:12,lg:12,xl:12},{default:c(()=>[a(Ae,{class:Ce(["alert-panel",{"has-critical-alerts":O.value>0}]),shadow:"hover"},{header:c(()=>[r("div",rr,[g[22]||(g[22]=r("span",null,"å®æ—¶å‘Šè­¦",-1)),r("div",ir,[a(lt,{value:x.value.length,hidden:x.value.length===0,type:"danger"},{default:c(()=>[a(ue,null,{default:c(()=>[a(H(kt))]),_:1})]),_:1},8,["value","hidden"]),O.value>0?(L(),W("span",cr,"ä¸¥é‡å‘Šè­¦ "+S(O.value),1)):fe("",!0)])])]),default:c(()=>[r("div",ur,[(L(!0),W(Fe,null,Ne(x.value.slice(0,5),z=>(L(),W("div",{key:z.alertId,class:Ce(["alert-item",`alert-${z.severity.toLowerCase()}`]),onClick:Jt=>Ee(z)},[r("div",fr,[a(ue,{class:Ce(de(z.severity))},{default:c(()=>[(L(),ie(dt(de(z.severity))))]),_:2},1032,["class"])]),r("div",pr,[r("div",mr,S(z.message),1),r("div",vr,[r("span",hr,[a(ue,null,{default:c(()=>[a(H(hn))]),_:1}),M(" "+S(z.deviceId),1)]),r("span",gr,[a(ue,null,{default:c(()=>[a(H(_o))]),_:1}),M(" "+S(U(z.timestamp)),1)])])]),r("div",yr,[a(le,{type:X(z.severity),size:"small"},{default:c(()=>[M(S(Y(z.severity)),1)]),_:2},1032,["type"])])],10,dr))),128)),x.value.length===0?(L(),W("div",_r,[a(ue,null,{default:c(()=>[a(H(wo))]),_:1}),g[23]||(g[23]=r("span",null,"æš‚æ— æ´»è·ƒå‘Šè­¦",-1))])):fe("",!0)])]),_:1},8,["class"])]),_:1})]),_:1}),d.value?(L(),ie(Ae,{key:0,class:"device-list-section",shadow:"hover"},{header:c(()=>[r("div",wr,[g[25]||(g[25]=r("span",null,"è®¾å¤‡ç®¡ç†",-1)),r("div",br,[a(Be,{modelValue:f.value,"onUpdate:modelValue":g[1]||(g[1]=z=>f.value=z),placeholder:"æœç´¢è®¾å¤‡IDæˆ–é©¾é©¶å‘˜",size:"small",style:{width:"200px","margin-right":"10px"},clearable:""},{prefix:c(()=>[a(ue,null,{default:c(()=>[a(H(_n))]),_:1})]),_:1},8,["modelValue"]),a(J,{size:"small",onClick:I},{default:c(()=>[a(ue,null,{default:c(()=>[a(H(De))]),_:1}),g[24]||(g[24]=M(" åˆ·æ–° ",-1))]),_:1})])])]),default:c(()=>[Ut((L(),ie(to,{data:Z.value,stripe:"",style:{width:"100%"},onRowClick:Ge},{default:c(()=>[a($e,{prop:"deviceId",label:"è®¾å¤‡ID",width:"150"}),a($e,{prop:"username",label:"é©¾é©¶å‘˜",width:"120"}),a($e,{prop:"status",label:"çŠ¶æ€",width:"100"},{default:c(({row:z})=>[a(xt,{status:z.status},null,8,["status"])]),_:1}),a($e,{prop:"healthScore",label:"å¥åº·åº¦",width:"120"},{default:c(({row:z})=>[a(At,{score:z.healthScore||0},null,8,["score"])]),_:1}),a($e,{prop:"lastSeen",label:"æœ€åå¿ƒè·³",width:"150"},{default:c(({row:z})=>[M(S(Me(z.lastSeen)),1)]),_:1}),a($e,{prop:"location",label:"ä½ç½®","min-width":"200"},{default:c(({row:z})=>[z.location&&z.location.lat!==null&&z.location.lng!==null?(L(),W("span",Sr,S(z.location.lat.toFixed(6))+", "+S(z.location.lng.toFixed(6)),1)):(L(),W("span",Er,"æœªçŸ¥"))]),_:1}),a($e,{label:"æ“ä½œ",width:"120",fixed:"right"},{default:c(({row:z})=>[a(J,{size:"small",type:"primary",onClick:vn(Jt=>ae(z),["stop"])},{default:c(()=>[...g[26]||(g[26]=[M(" è¯¦æƒ… ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[so,H(n).loading]])]),_:1})):(L(),ie(Ae,{key:1,class:"device-status-section",shadow:"hover"},{header:c(()=>[r("div",Ir,[g[28]||(g[28]=r("span",null,"è®¾å¤‡çŠ¶æ€æ¦‚è§ˆ",-1)),a(J,{size:"small",onClick:I},{default:c(()=>[a(ue,null,{default:c(()=>[a(H(De))]),_:1}),g[27]||(g[27]=M(" åˆ·æ–° ",-1))]),_:1})])]),default:c(()=>[r("div",Cr,[(L(!0),W(Fe,null,Ne(Z.value.slice(0,8),z=>(L(),W("div",{key:z.deviceId,class:"device-status-item",onClick:Jt=>Oe(z)},[r("div",kr,[r("div",xr,S(z.deviceId),1),r("div",Ar,S(z.username||"æœªçŸ¥ç”¨æˆ·"),1)]),r("div",Dr,[a(xt,{status:z.status},null,8,["status"]),a(At,{score:z.healthScore||0},null,8,["score"])]),r("div",Or,S(Me(z.lastSeen)),1)],8,Tr))),128))])]),_:1})),a(oo,{modelValue:u.value,"onUpdate:modelValue":g[6]||(g[6]=z=>u.value=z),title:"åœ°å›¾é…ç½®",width:"600px","close-on-click-modal":!1},{footer:c(()=>[a(J,{onClick:g[5]||(g[5]=z=>u.value=!1)},{default:c(()=>[...g[32]||(g[32]=[M("å–æ¶ˆ",-1)])]),_:1}),a(J,{type:"primary",onClick:B},{default:c(()=>[...g[33]||(g[33]=[M("ä¿å­˜",-1)])]),_:1})]),default:c(()=>[a(no,{model:N.value,"label-width":"120px"},{default:c(()=>[a(bt,{label:"é«˜å¾·åœ°å›¾API Key"},{default:c(()=>[a(Be,{modelValue:N.value.apiKey,"onUpdate:modelValue":g[2]||(g[2]=z=>N.value.apiKey=z),type:"password",placeholder:"è¯·è¾“å…¥é«˜å¾·åœ°å›¾API Key","show-password":""},null,8,["modelValue"]),g[29]||(g[29]=r("div",{class:"form-tip"},[M(" è¯·åˆ° "),r("a",{href:"https://console.amap.com/",target:"_blank"},"é«˜å¾·å¼€æ”¾å¹³å°"),M(" ç”³è¯·API Key "),r("br"),r("a",{href:"/map-config-help",target:"_blank"},"æŸ¥çœ‹è¯¦ç»†é…ç½®å¸®åŠ©")],-1))]),_:1}),a(bt,{label:"å®‰å…¨å¯†é’¥"},{default:c(()=>[a(Be,{modelValue:N.value.securityKey,"onUpdate:modelValue":g[3]||(g[3]=z=>N.value.securityKey=z),type:"password",placeholder:"è¯·è¾“å…¥å®‰å…¨å¯†é’¥ï¼ˆå¯é€‰ï¼‰","show-password":""},null,8,["modelValue"]),g[30]||(g[30]=r("div",{class:"form-tip"}," 2021å¹´åç”³è¯·çš„API Keyéœ€è¦é…ç½®å®‰å…¨å¯†é’¥ï¼Œè¯·åˆ°æ§åˆ¶å°è·å– ",-1))]),_:1}),a(bt,{label:"APIç‰ˆæœ¬"},{default:c(()=>[a(Re,{modelValue:N.value.version,"onUpdate:modelValue":g[4]||(g[4]=z=>N.value.version=z),placeholder:"é€‰æ‹©APIç‰ˆæœ¬"},{default:c(()=>[a(ye,{label:"åŸºç¡€ç‰ˆ v1.4.15",value:"1.4.15"}),a(ye,{label:"æ ‡å‡†ç‰ˆ v2.0",value:"2.0"})]),_:1},8,["modelValue"]),g[31]||(g[31]=r("div",{class:"form-tip"}," åŸºç¡€ç‰ˆåŠŸèƒ½è¾ƒå°‘ä½†è°ƒç”¨é™åˆ¶è¾ƒå°‘ï¼Œæ ‡å‡†ç‰ˆåŠŸèƒ½å®Œæ•´ä½†æœ‰é™åˆ¶ ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Rr=Ie(Mr,[["__scopeId","data-v-b81a840f"]]),$r={class:"map-controls"},Lr={key:0,class:"time-controls"},Pr={key:1,class:"map-error"},Fr={key:2,class:"map-loading"},Nr={__name:"SimpleTrackMap",props:{deviceId:{type:String,required:!0},trackData:{type:Array,default:()=>[]},events:{type:Array,default:()=>[]},center:{type:Object,default:()=>({lat:33.553733,lng:119.030953})},zoom:{type:Number,default:12}},emits:["event-click","map-ready"],setup(e,{expose:t,emit:n}){const o=e,s=n,l=P(null),i=P(!1),f=P(""),y=P(!1),u=P(0);let d=null,_=null,C=[],x=[],m=null,h=null,w=null;const A=P(""),O=()=>{const b="732a364f70864bb0c4ac3395cc3d5503";localStorage.getItem("amap_api_key"),A.value=b},F=async()=>{if(console.log("å¼€å§‹åˆå§‹åŒ–SimpleTrackMap..."),console.log("API Key:",A.value?"å·²é…ç½®":"æœªé…ç½®"),console.log("åœ°å›¾å®¹å™¨:",l.value),!A.value){f.value="é«˜å¾·åœ°å›¾API keyæœªé…ç½®";return}if(!l.value){f.value="åœ°å›¾å®¹å™¨æœªæ‰¾åˆ°";return}i.value=!0,f.value="";try{if(window.AMap||(console.log("åŠ è½½é«˜å¾·åœ°å›¾API..."),await N()),!window.AMap)throw new Error("é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥");console.log("AMapå·²åŠ è½½ï¼Œå¼€å§‹åˆ›å»ºSimpleTrackMapå®ä¾‹..."),console.log("åœ°å›¾å®¹å™¨å°ºå¯¸:",l.value.offsetWidth,"x",l.value.offsetHeight),d=new window.AMap.Map(l.value,{center:[o.center.lng,o.center.lat],zoom:o.zoom,mapStyle:"amap://styles/normal"}),console.log("SimpleTrackMapå®ä¾‹åˆ›å»ºæˆåŠŸ"),h=new window.AMap.InfoWindow({offset:new window.AMap.Pixel(0,-30)}),d.on("complete",()=>{console.log("SimpleTrackMapåœ°å›¾åŠ è½½å®Œæˆ"),s("map-ready",d),G(),K(),i.value=!1})}catch(b){console.error("SimpleTrackMapåœ°å›¾åˆå§‹åŒ–å¤±è´¥:",b),f.value=b.message||"åœ°å›¾åˆå§‹åŒ–å¤±è´¥",i.value=!1}},N=()=>new Promise((b,k)=>{if(window.AMap){b();return}const $=localStorage.getItem("amap_version")||"1.4.15",U=document.createElement("script");U.src=`https://webapi.amap.com/maps?v=${$}&key=${A.value}`,U.onload=()=>{const Y=()=>{window.AMap&&window.AMap.Map?b():setTimeout(Y,100)};Y()},U.onerror=()=>{k(new Error("é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥"))},document.head.appendChild(U)}),G=()=>{if(!d||!o.trackData.length)return;_&&d.remove(_),C.forEach(k=>d.remove(k)),C=[];const b=o.trackData.map(k=>[k.lng,k.lat]);_=new window.AMap.Polyline({path:b,strokeColor:"#409EFF",strokeWeight:3,strokeOpacity:.8}),d.add(_),o.trackData.forEach((k,$)=>{const U=new window.AMap.Marker({position:[k.lng,k.lat],title:`è½¨è¿¹ç‚¹ ${$+1}`,icon:Z($),anchor:"center"});U.on("click",()=>{oe(k,U)}),C.push(U),d.add(U)}),b.length>0&&d.setFitView(C)},K=()=>{!d||!o.events.length||(x.forEach(b=>d.remove(b)),x=[],o.events.forEach(b=>{if(b.location&&b.location.lat&&b.location.lng){const k=new window.AMap.Marker({position:[b.location.lng,b.location.lat],title:I(b.eventType),icon:ne(b.severity),anchor:"center"});k.on("click",()=>{pe(b,k),s("event-click",b)}),x.push(k),d.add(k)}}))},Z=b=>b===0?"https://webapi.amap.com/theme/v1.3/markers/n/mark_g.png":b===o.trackData.length-1?"https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png":"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",ne=b=>{const k={LOW:"https://webapi.amap.com/theme/v1.3/markers/n/mark_g.png",MEDIUM:"https://webapi.amap.com/theme/v1.3/markers/n/mark_y.png",HIGH:"https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png",CRITICAL:"https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png"};return k[b]||k.MEDIUM},oe=(b,k)=>{const $=`
    <div class="track-point-info">
      <h4>è½¨è¿¹ç‚¹</h4>
      <p><strong>æ—¶é—´:</strong> ${te(b.timestamp)}</p>
      <p><strong>ä½ç½®:</strong> ${b.lat.toFixed(6)}, ${b.lng.toFixed(6)}</p>
      <p><strong>é€Ÿåº¦:</strong> ${b.speed||0} km/h</p>
      <p><strong>æ–¹å‘:</strong> ${b.direction||0}Â°</p>
    </div>
  `;h.setContent($),h.open(d,k.getPosition())},pe=(b,k)=>{const $=`
    <div class="event-info">
      <h4>${I(b.eventType)}</h4>
      <p><strong>ä¸¥é‡ç¨‹åº¦:</strong> ${R(b.severity)}</p>
      <p><strong>ç½®ä¿¡åº¦:</strong> ${(b.confidence*100).toFixed(1)}%</p>
      <p><strong>æ—¶é—´:</strong> ${te(b.timestamp)}</p>
      <p><strong>æè¿°:</strong> ${b.context||"æ— "}</p>
    </div>
  `;h.setContent($),h.open(d,k.getPosition())},ge=()=>{o.trackData.length&&(y.value?(w&&(clearInterval(w),w=null),y.value=!1):(y.value=!0,u.value=0,w=setInterval(()=>{u.value<o.trackData.length-1?(u.value++,me(u.value)):(w&&(clearInterval(w),w=null),y.value=!1)},1e3)))},we=()=>{w&&(clearInterval(w),w=null),y.value=!1,u.value=0,G()},me=b=>{if(!d||!o.trackData[b])return;const k=o.trackData[b];d.setCenter([k.lng,k.lat]),m&&d.remove(m),m=new window.AMap.Marker({position:[k.lng,k.lat],title:"å½“å‰ä½ç½®",icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png",anchor:"center"}),d.add(m)},E=()=>{d&&o.trackData.length>0?d.setFitView(C):d&&d.setCenter([o.center.lng,o.center.lat])},p=()=>{f.value="",d&&(d.destroy(),d=null),F()},ee=b=>o.trackData[b]?te(o.trackData[b].timestamp):"",te=b=>b?new Date(b).toLocaleString():"æœªçŸ¥",I=b=>({FATIGUE:"ç–²åŠ³æ£€æµ‹",DISTRACTION:"åˆ†å¿ƒè¡Œä¸º",EMERGENCY:"ç´§æ€¥äº‹ä»¶"})[b]||"æœªçŸ¥äº‹ä»¶",R=b=>({LOW:"è½»å¾®",MEDIUM:"ä¸­ç­‰",HIGH:"ä¸¥é‡",CRITICAL:"å±æ€¥"})[b]||"æœªçŸ¥";return Pe(()=>o.trackData,G,{deep:!0}),Pe(()=>o.events,K,{deep:!0}),Pe(()=>A.value,b=>{b&&!d&&F()}),He(()=>{O(),mn(()=>{A.value&&F()})}),Ve(()=>{w&&clearInterval(w),d&&d.destroy()}),t({centerMap:E,updateTrackDisplay:G,updateEventMarkers:K,getMap:()=>d}),(b,k)=>{const $=D("el-icon"),U=D("el-button"),Y=D("el-button-group"),X=D("el-slider"),de=D("el-alert");return L(),W("div",{class:"simple-track-map",ref_key:"mapContainer",ref:l},[r("div",$r,[a(Y,null,{default:c(()=>[a(U,{size:"small",onClick:ge,disabled:!e.trackData.length},{default:c(()=>[a($,null,{default:c(()=>[a(H(bo))]),_:1}),M(" "+S(y.value?"æš‚åœ":"æ’­æ”¾"),1)]),_:1},8,["disabled"]),a(U,{size:"small",onClick:we},{default:c(()=>[a($,null,{default:c(()=>[a(H(De))]),_:1}),k[1]||(k[1]=M(" é‡ç½® ",-1))]),_:1}),a(U,{size:"small",onClick:E},{default:c(()=>[a($,null,{default:c(()=>[a(H(gn))]),_:1}),k[2]||(k[2]=M(" å±…ä¸­ ",-1))]),_:1})]),_:1})]),e.trackData.length?(L(),W("div",Lr,[a(X,{modelValue:u.value,"onUpdate:modelValue":k[0]||(k[0]=Ee=>u.value=Ee),min:0,max:e.trackData.length-1,step:1,onChange:me,"format-tooltip":ee},null,8,["modelValue","max"])])):fe("",!0),f.value?(L(),W("div",Pr,[a(de,{title:"åœ°å›¾åŠ è½½å¤±è´¥",description:f.value,type:"error","show-icon":"",closable:!1},null,8,["description"]),a(U,{onClick:p,style:{"margin-top":"10px"}},{default:c(()=>[...k[3]||(k[3]=[M("é‡è¯•",-1)])]),_:1})])):fe("",!0),i.value?(L(),W("div",Fr,[a($,{class:"is-loading"},{default:c(()=>[a(H(yn))]),_:1}),k[4]||(k[4]=r("span",null,"åœ°å›¾åŠ è½½ä¸­...",-1))])):fe("",!0)],512)}}},Ur=Ie(Nr,[["__scopeId","data-v-89efa1a2"]]),zr={class:"device-detail"},Br={class:"page-header"},Hr={key:0,class:"device-info"},Vr={class:"info-item"},Wr={class:"info-item"},jr={class:"info-item"},qr={class:"info-item"},Gr={class:"info-item"},Kr={class:"info-item"},Jr={class:"info-item"},Yr={class:"info-item"},Xr={key:0,class:"data-grid"},Qr={class:"data-item"},Zr={class:"data-item"},ei={class:"data-item"},ti={class:"data-item"},ni={class:"data-item"},oi={class:"data-item"},si={key:0,class:"stats-grid"},ai={class:"stat-item"},li={class:"stat-value"},ri={class:"stat-item"},ii={class:"stat-value"},ci={class:"stat-item"},ui={class:"stat-value"},di={class:"stat-item"},fi={class:"stat-value"},pi={class:"stat-item"},mi={class:"stat-value"},vi={class:"event-context"},hi={class:"event-details"},gi={class:"header-actions"},yi={key:0,class:"event-detail"},_i={__name:"DeviceDetail",setup(e){const t=pn(),n=Ft(),o=Wt(),s=mt(),l=Q(()=>t.params.deviceId),i=Q(()=>o.currentDevice),f=P([]),y=P([]),u=P(!1),d=P(null),_=P(!1),C=P({apiKey:""}),x=()=>{n.go(-1)},m=async()=>{try{await o.fetchDeviceDetail(l.value)}catch(E){console.error("åŠ è½½è®¾å¤‡è¯¦æƒ…å¤±è´¥:",E),re.error("åŠ è½½è®¾å¤‡è¯¦æƒ…å¤±è´¥")}},h=async()=>{try{const E={deviceId:l.value,eventType:"FATIGUE",limit:10},p=await s.fetchEvents(E);f.value=p.events||[]}catch(E){console.error("åŠ è½½äº‹ä»¶å†å²å¤±è´¥:",E)}},w=async()=>{try{const E=new Date,ee={startTime:new Date(E.getTime()-1440*60*1e3).toISOString(),endTime:E.toISOString()},te=await o.fetchDeviceTrack(l.value,ee);y.value=te.track||[]}catch(E){console.error("åŠ è½½è½¨è¿¹æ•°æ®å¤±è´¥:",E)}},A=()=>{m()},O=E=>{console.log("æ˜¾ç¤ºäº‹ä»¶ä½ç½®:",E)},F=E=>{d.value=E,u.value=!0},N=()=>{C.value.apiKey=localStorage.getItem("amap_api_key")||"",_.value=!0},G=()=>{if(!C.value.apiKey.trim()){re.warning("è¯·è¾“å…¥API Key");return}localStorage.setItem("amap_api_key",C.value.apiKey),_.value=!1,re.success("åœ°å›¾é…ç½®å·²ä¿å­˜"),setTimeout(()=>{window.location.reload()},1e3)},K=E=>E?new Date(E).toLocaleString():"æœªçŸ¥",Z=E=>E?`${E.lat.toFixed(6)}, ${E.lng.toFixed(6)}`:"æœªçŸ¥",ne=E=>{if(!E)return"0åˆ†é’Ÿ";const p=Math.floor(E/3600),ee=Math.floor(E%3600/60);return p>0?`${p}å°æ—¶${ee}åˆ†é’Ÿ`:`${ee}åˆ†é’Ÿ`},oe=E=>E?E<1?"ä¼˜ç§€":E<2?"è‰¯å¥½":E<5?"ä¸€èˆ¬":"è¾ƒå·®":"æœªçŸ¥",pe=E=>({FATIGUE:"ç–²åŠ³æ£€æµ‹",DISTRACTION:"åˆ†å¿ƒè¡Œä¸º",EMERGENCY:"ç´§æ€¥äº‹ä»¶"})[E]||"æœªçŸ¥äº‹ä»¶",ge=E=>({LOW:"è½»å¾®",MEDIUM:"ä¸­ç­‰",HIGH:"ä¸¥é‡",CRITICAL:"å±æ€¥"})[E]||"æœªçŸ¥",we=E=>({LOW:"success",MEDIUM:"warning",HIGH:"danger",CRITICAL:"danger"})[E]||"info",me=E=>{E.deviceId===l.value&&m()};return He(()=>{m(),h(),w(),se.on("realtime_data",me);const E=setInterval(()=>{m()},3e4);Ve(()=>{clearInterval(E),se.off("realtime_data",me)})}),(E,p)=>{const ee=D("el-icon"),te=D("el-button"),I=D("el-card"),R=D("el-empty"),b=D("el-tag"),k=D("el-timeline-item"),$=D("el-timeline"),U=D("el-col"),Y=D("el-row"),X=D("el-descriptions-item"),de=D("el-descriptions"),Ee=D("el-dialog"),Oe=D("el-input"),qe=D("el-form-item"),ve=D("el-form"),Ge=Nt("loading");return L(),W("div",zr,[r("div",Br,[a(te,{onClick:x,size:"small"},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(So))]),_:1}),p[4]||(p[4]=M(" è¿”å› ",-1))]),_:1}),r("h2",null,"è®¾å¤‡è¯¦æƒ… - "+S(l.value),1)]),Ut((L(),ie(Y,{gutter:20},{default:c(()=>[a(U,{xs:24,sm:24,md:10,lg:10,xl:10},{default:c(()=>[a(I,{class:"info-panel",shadow:"hover"},{header:c(()=>[...p[5]||(p[5]=[r("span",null,"è®¾å¤‡ä¿¡æ¯",-1)])]),default:c(()=>[i.value?(L(),W("div",Hr,[r("div",Vr,[p[6]||(p[6]=r("label",null,"è®¾å¤‡ID:",-1)),r("span",null,S(i.value.deviceId),1)]),r("div",Wr,[p[7]||(p[7]=r("label",null,"è®¾å¤‡ç±»å‹:",-1)),r("span",null,S(i.value.deviceType),1)]),r("div",jr,[p[8]||(p[8]=r("label",null,"ç‰ˆæœ¬:",-1)),r("span",null,S(i.value.version),1)]),r("div",qr,[p[9]||(p[9]=r("label",null,"é©¾é©¶å‘˜:",-1)),r("span",null,S(i.value.user?.username||"æœªçŸ¥"),1)]),r("div",Gr,[p[10]||(p[10]=r("label",null,"è”ç³»æ–¹å¼:",-1)),r("span",null,S(i.value.user?.phone||"æœªçŸ¥"),1)]),r("div",Kr,[p[11]||(p[11]=r("label",null,"çŠ¶æ€:",-1)),a(xt,{status:i.value.status},null,8,["status"])]),r("div",Jr,[p[12]||(p[12]=r("label",null,"å¥åº·åº¦:",-1)),a(At,{score:i.value.healthScore||0},null,8,["score"])]),r("div",Yr,[p[13]||(p[13]=r("label",null,"æœ€åå¿ƒè·³:",-1)),r("span",null,S(K(i.value.lastSeen)),1)])])):fe("",!0)]),_:1}),a(I,{class:"realtime-data",shadow:"hover"},{header:c(()=>[p[15]||(p[15]=r("span",null,"å®æ—¶æ•°æ®",-1)),a(te,{size:"small",onClick:A},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(De))]),_:1}),p[14]||(p[14]=M(" åˆ·æ–° ",-1))]),_:1})]),default:c(()=>[i.value?.currentLocation?(L(),W("div",Xr,[r("div",Qr,[p[16]||(p[16]=r("label",null,"ä½ç½®:",-1)),r("span",null,S(Z(i.value.currentLocation)),1)]),r("div",Zr,[p[17]||(p[17]=r("label",null,"é€Ÿåº¦:",-1)),r("span",null,S(i.value.currentLocation.speed||0)+" km/h",1)]),r("div",ei,[p[18]||(p[18]=r("label",null,"æ–¹å‘:",-1)),r("span",null,S(i.value.currentLocation.direction||0)+"Â°",1)]),r("div",ti,[p[19]||(p[19]=r("label",null,"æµ·æ‹”:",-1)),r("span",null,S(i.value.currentLocation.altitude||0)+"m",1)]),r("div",ni,[p[20]||(p[20]=r("label",null,"GPSè´¨é‡:",-1)),r("span",null,S(oe(i.value.currentLocation.hdop)),1)]),r("div",oi,[p[21]||(p[21]=r("label",null,"å«æ˜Ÿæ•°:",-1)),r("span",null,S(i.value.currentLocation.satellites||0)+"é¢—",1)])])):(L(),ie(R,{key:1,description:"æš‚æ— å®æ—¶æ•°æ®"}))]),_:1}),a(I,{class:"fatigue-stats",shadow:"hover"},{header:c(()=>[...p[22]||(p[22]=[r("span",null,"ç–²åŠ³è¡Œä¸ºç»Ÿè®¡",-1)])]),default:c(()=>[i.value?.statistics?(L(),W("div",si,[r("div",ai,[p[23]||(p[23]=r("label",null,"ä»Šæ—¥ç–²åŠ³äº‹ä»¶:",-1)),r("span",li,S(i.value.statistics.fatigueEvents||0),1)]),r("div",ri,[p[24]||(p[24]=r("label",null,"ä»Šæ—¥åˆ†å¿ƒäº‹ä»¶:",-1)),r("span",ii,S(i.value.statistics.distractionEvents||0),1)]),r("div",ci,[p[25]||(p[25]=r("label",null,"æ€»é©¾é©¶æ—¶é•¿:",-1)),r("span",ui,S(ne(i.value.statistics.totalDrivingTime)),1)]),r("div",di,[p[26]||(p[26]=r("label",null,"æ€»è¡Œé©¶è·ç¦»:",-1)),r("span",fi,S(i.value.statistics.totalDistance||0)+" km",1)]),r("div",pi,[p[27]||(p[27]=r("label",null,"æœ€åç–²åŠ³äº‹ä»¶:",-1)),r("span",mi,S(K(i.value.statistics.lastFatigueEvent)),1)])])):(L(),ie(R,{key:1,description:"æš‚æ— ç»Ÿè®¡æ•°æ®"}))]),_:1}),a(I,{class:"event-history",shadow:"hover"},{header:c(()=>[p[29]||(p[29]=r("span",null,"å†å²ç–²åŠ³äº‹ä»¶",-1)),a(te,{size:"small",onClick:h},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(De))]),_:1}),p[28]||(p[28]=M(" åˆ·æ–° ",-1))]),_:1})]),default:c(()=>[f.value.length?(L(),ie($,{key:0},{default:c(()=>[(L(!0),W(Fe,null,Ne(f.value,ae=>(L(),ie(k,{key:ae.eventId,timestamp:K(ae.timestamp),type:we(ae.severity),onClick:ot=>O(ae)},{default:c(()=>[a(b,{type:we(ae.severity),size:"small"},{default:c(()=>[M(S(pe(ae.eventType)),1)]),_:2},1032,["type"]),r("p",vi,S(ae.context),1),r("p",hi," ç½®ä¿¡åº¦: "+S((ae.confidence*100).toFixed(1))+"% | æŒç»­æ—¶é—´: "+S(ae.duration)+"ç§’ ",1)]),_:2},1032,["timestamp","type","onClick"]))),128))]),_:1})):(L(),ie(R,{key:1,description:"æš‚æ— ç–²åŠ³äº‹ä»¶"}))]),_:1})]),_:1}),a(U,{xs:24,sm:24,md:14,lg:14,xl:14},{default:c(()=>[a(I,{class:"map-panel",shadow:"hover"},{header:c(()=>[p[32]||(p[32]=r("span",null,"è®¾å¤‡è½¨è¿¹ä¸äº‹ä»¶ä½ç½®",-1)),r("div",gi,[a(te,{size:"small",onClick:w},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(De))]),_:1}),p[30]||(p[30]=M(" åˆ·æ–°è½¨è¿¹ ",-1))]),_:1}),a(te,{size:"small",onClick:N},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(zt))]),_:1}),p[31]||(p[31]=M(" é…ç½® ",-1))]),_:1})])]),default:c(()=>[a(Ur,{"device-id":l.value,"track-data":y.value,events:f.value,onEventClick:F},null,8,["device-id","track-data","events"])]),_:1})]),_:1})]),_:1})),[[Ge,H(o).loading]]),a(Ee,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=ae=>u.value=ae),title:"äº‹ä»¶è¯¦æƒ…",width:"600px"},{default:c(()=>[d.value?(L(),W("div",yi,[a(de,{column:2,border:""},{default:c(()=>[a(X,{label:"äº‹ä»¶ID"},{default:c(()=>[M(S(d.value.eventId),1)]),_:1}),a(X,{label:"è®¾å¤‡ID"},{default:c(()=>[M(S(d.value.deviceId),1)]),_:1}),a(X,{label:"äº‹ä»¶ç±»å‹"},{default:c(()=>[M(S(pe(d.value.eventType)),1)]),_:1}),a(X,{label:"ä¸¥é‡ç¨‹åº¦"},{default:c(()=>[M(S(ge(d.value.severity)),1)]),_:1}),a(X,{label:"ç½®ä¿¡åº¦"},{default:c(()=>[M(S((d.value.confidence*100).toFixed(1))+"%",1)]),_:1}),a(X,{label:"æŒç»­æ—¶é—´"},{default:c(()=>[M(S(d.value.duration)+"ç§’",1)]),_:1}),a(X,{label:"å‘ç”Ÿæ—¶é—´",span:2},{default:c(()=>[M(S(K(d.value.timestamp)),1)]),_:1}),a(X,{label:"ä½ç½®",span:2},{default:c(()=>[M(S(Z(d.value.location)),1)]),_:1}),a(X,{label:"è¡Œä¸ºæè¿°",span:2},{default:c(()=>[M(S(d.value.behavior),1)]),_:1}),a(X,{label:"ä¸Šä¸‹æ–‡",span:2},{default:c(()=>[M(S(d.value.context),1)]),_:1})]),_:1})])):fe("",!0)]),_:1},8,["modelValue"]),a(Ee,{modelValue:_.value,"onUpdate:modelValue":p[3]||(p[3]=ae=>_.value=ae),title:"åœ°å›¾é…ç½®",width:"500px","close-on-click-modal":!1},{footer:c(()=>[a(te,{onClick:p[2]||(p[2]=ae=>_.value=!1)},{default:c(()=>[...p[34]||(p[34]=[M("å–æ¶ˆ",-1)])]),_:1}),a(te,{type:"primary",onClick:G},{default:c(()=>[...p[35]||(p[35]=[M("ä¿å­˜",-1)])]),_:1})]),default:c(()=>[a(ve,{model:C.value,"label-width":"100px"},{default:c(()=>[a(qe,{label:"é«˜å¾·åœ°å›¾API Key"},{default:c(()=>[a(Oe,{modelValue:C.value.apiKey,"onUpdate:modelValue":p[1]||(p[1]=ae=>C.value.apiKey=ae),type:"password",placeholder:"è¯·è¾“å…¥é«˜å¾·åœ°å›¾API Key","show-password":""},null,8,["modelValue"]),p[33]||(p[33]=r("div",{class:"form-tip"},[M(" è¯·åˆ° "),r("a",{href:"https://console.amap.com/",target:"_blank"},"é«˜å¾·å¼€æ”¾å¹³å°"),M(" ç”³è¯·API Key ")],-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},wi=Ie(_i,[["__scopeId","data-v-37e52c0a"]]),bi={class:"event-management"},Si={class:"page-header"},Ei={class:"header-actions"},Ii={class:"card-header"},Ci={class:"header-info"},Ti={class:"pagination-wrapper"},ki={class:"severity-stats"},xi={class:"severity-label"},Ai={class:"severity-count"},Di={class:"severity-percentage"},Oi={class:"device-stats"},Mi={class:"device-info"},Ri={class:"device-id"},$i={class:"device-user"},Li={class:"device-count"},Pi={key:0,class:"event-detail"},Fi={__name:"EventManagement",setup(e){Ft();const t=mt(),n=Wt(),o=P({deviceId:"",eventType:"",severity:"",timeRange:[]}),s=P({currentPage:1,pageSize:20,total:0}),l=P(!1),i=P(null),f=Q(()=>n.devices),y=Q(()=>{const E={LOW:0,MEDIUM:0,HIGH:0,CRITICAL:0};return t.events.forEach(p=>{E.hasOwnProperty(p.severity)&&E[p.severity]++}),E}),u=Q(()=>{const E={};return t.events.forEach(p=>{E[p.deviceId]||(E[p.deviceId]={deviceId:p.deviceId,username:p.user?.username||"æœªçŸ¥",eventCount:0}),E[p.deviceId].eventCount++}),Object.values(E).sort((p,ee)=>ee.eventCount-p.eventCount)}),d=async()=>{try{console.log("=== EventManagement: å¼€å§‹åŠ è½½äº‹ä»¶åˆ—è¡¨ ===");const E={...C()};console.log("åŠ è½½å‚æ•°:",E);const p=await t.fetchEvents(E);console.log("=== EventManagement: äº‹ä»¶åˆ—è¡¨åŠ è½½å®Œæˆ ==="),console.log("å“åº”æ•°æ®:",p),console.log("å½“å‰äº‹ä»¶æ•°é‡:",t.events.length),console.log("äº‹ä»¶åˆ—è¡¨:",t.events),s.value.total=p.total||0}catch(E){console.error("åŠ è½½äº‹ä»¶åˆ—è¡¨å¤±è´¥:",E),re.error("åŠ è½½äº‹ä»¶åˆ—è¡¨å¤±è´¥")}},_=async()=>{try{await n.fetchDevices()}catch(E){console.error("åŠ è½½è®¾å¤‡åˆ—è¡¨å¤±è´¥:",E)}},C=()=>{const E={};return o.value.deviceId&&(E.deviceId=o.value.deviceId),o.value.eventType&&(E.eventType=o.value.eventType),o.value.severity&&(E.severity=o.value.severity),o.value.timeRange&&o.value.timeRange.length===2&&(E.startTime=o.value.timeRange[0],E.endTime=o.value.timeRange[1]),E},x=()=>{s.value.currentPage=1,d()},m=()=>{o.value={deviceId:"",eventType:"",severity:"",timeRange:[]},s.value.currentPage=1,d()},h=()=>{d()},w=()=>{re.info("å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­...")},A=E=>{O(E)},O=E=>{i.value=E,l.value=!0},F=E=>{s.value.pageSize=E,s.value.currentPage=1,d()},N=E=>{s.value.currentPage=E,d()},G=E=>{d()},K=E=>E?new Date(E).toLocaleString():"æœªçŸ¥",Z=E=>E?`${E.lat.toFixed(6)}, ${E.lng.toFixed(6)}`:"æœªçŸ¥",ne=E=>({FATIGUE:"ç–²åŠ³æ£€æµ‹",DISTRACTION:"åˆ†å¿ƒè¡Œä¸º",EMERGENCY:"ç´§æ€¥äº‹ä»¶"})[E]||"æœªçŸ¥äº‹ä»¶",oe=E=>({FATIGUE:"warning",DISTRACTION:"danger",EMERGENCY:"danger"})[E]||"info",pe=E=>({LOW:"è½»å¾®",MEDIUM:"ä¸­ç­‰",HIGH:"ä¸¥é‡",CRITICAL:"å±æ€¥"})[E]||"æœªçŸ¥",ge=E=>({LOW:"success",MEDIUM:"warning",HIGH:"danger",CRITICAL:"danger"})[E]||"info",we=E=>{const p=t.events.length;return p===0?0:(E/p*100).toFixed(1)},me=E=>{console.log("æ”¶åˆ°æ–°äº‹ä»¶æ¨é€:",E);const{type:p,payload:ee}=E;if(p==="event"){const{deviceId:te,eventType:I,data:R,timestamp:b}=ee,k={eventId:R.eventId||`EVENT_${Date.now()}`,deviceId:te,eventType:I,severity:R.severity||"MEDIUM",location:R.location,behavior:R.behavior,confidence:R.confidence,duration:R.duration,alertLevel:R.alertLevel,context:R.context,timestamp:new Date(b).toISOString(),user:{username:"å®æ—¶æ¨é€"}};t.events.unshift(k),re.success(`æ”¶åˆ°æ–°äº‹ä»¶: ${I}`);try{new Audio("/static/audio/alert_mid.mp3").play().catch(()=>{})}catch($){console.log("æ— æ³•æ’­æ”¾æç¤ºéŸ³:",$)}}};return He(()=>{_(),d(),se.on("event",me);const E=setInterval(()=>{d()},3e5);Ve(()=>{clearInterval(E),se.off("event",me)})}),(E,p)=>{const ee=D("el-icon"),te=D("el-button"),I=D("el-option"),R=D("el-select"),b=D("el-form-item"),k=D("el-date-picker"),$=D("el-form"),U=D("el-card"),Y=D("el-table-column"),X=D("el-tag"),de=D("el-table"),Ee=D("el-pagination"),Oe=D("el-col"),qe=D("el-row"),ve=D("el-descriptions-item"),Ge=D("el-descriptions"),ae=D("el-dialog"),ot=Nt("loading");return L(),W("div",bi,[r("div",Si,[p[9]||(p[9]=r("h2",null,"äº‹ä»¶ç®¡ç†",-1)),r("div",Ei,[a(te,{onClick:h},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(De))]),_:1}),p[7]||(p[7]=M(" åˆ·æ–° ",-1))]),_:1}),a(te,{onClick:w},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(Eo))]),_:1}),p[8]||(p[8]=M(" å¯¼å‡º ",-1))]),_:1})])]),a(U,{class:"filter-section",shadow:"hover"},{default:c(()=>[a($,{model:o.value,inline:""},{default:c(()=>[a(b,{label:"è®¾å¤‡"},{default:c(()=>[a(R,{modelValue:o.value.deviceId,"onUpdate:modelValue":p[0]||(p[0]=B=>o.value.deviceId=B),placeholder:"é€‰æ‹©è®¾å¤‡",clearable:"",style:{width:"200px"}},{default:c(()=>[(L(!0),W(Fe,null,Ne(f.value,B=>(L(),ie(I,{key:B.deviceId,label:`${B.deviceId} (${B.username})`,value:B.deviceId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(b,{label:"äº‹ä»¶ç±»å‹"},{default:c(()=>[a(R,{modelValue:o.value.eventType,"onUpdate:modelValue":p[1]||(p[1]=B=>o.value.eventType=B),placeholder:"é€‰æ‹©äº‹ä»¶ç±»å‹",clearable:"",style:{width:"150px"}},{default:c(()=>[a(I,{label:"ç–²åŠ³æ£€æµ‹",value:"FATIGUE"}),a(I,{label:"åˆ†å¿ƒè¡Œä¸º",value:"DISTRACTION"}),a(I,{label:"ç´§æ€¥äº‹ä»¶",value:"EMERGENCY"})]),_:1},8,["modelValue"])]),_:1}),a(b,{label:"ä¸¥é‡ç¨‹åº¦"},{default:c(()=>[a(R,{modelValue:o.value.severity,"onUpdate:modelValue":p[2]||(p[2]=B=>o.value.severity=B),placeholder:"é€‰æ‹©ä¸¥é‡ç¨‹åº¦",clearable:"",style:{width:"150px"}},{default:c(()=>[a(I,{label:"è½»å¾®",value:"LOW"}),a(I,{label:"ä¸­ç­‰",value:"MEDIUM"}),a(I,{label:"ä¸¥é‡",value:"HIGH"}),a(I,{label:"å±æ€¥",value:"CRITICAL"})]),_:1},8,["modelValue"])]),_:1}),a(b,{label:"æ—¶é—´èŒƒå›´"},{default:c(()=>[a(k,{modelValue:o.value.timeRange,"onUpdate:modelValue":p[3]||(p[3]=B=>o.value.timeRange=B),type:"datetimerange","range-separator":"è‡³","start-placeholder":"å¼€å§‹æ—¶é—´","end-placeholder":"ç»“æŸæ—¶é—´",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DDTHH:mm:ss",style:{width:"350px"}},null,8,["modelValue"])]),_:1}),a(b,null,{default:c(()=>[a(te,{type:"primary",onClick:x},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(_n))]),_:1}),p[10]||(p[10]=M(" æœç´¢ ",-1))]),_:1}),a(te,{onClick:m},{default:c(()=>[a(ee,null,{default:c(()=>[a(H(Io))]),_:1}),p[11]||(p[11]=M(" é‡ç½® ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(qe,{gutter:20},{default:c(()=>[a(Oe,{xs:24,sm:24,md:16,lg:16,xl:16},{default:c(()=>[a(U,{class:"event-list-section",shadow:"hover"},{header:c(()=>[r("div",Ii,[p[12]||(p[12]=r("span",null,"äº‹ä»¶åˆ—è¡¨",-1)),r("div",Ci," å…± "+S(H(t).events.length)+" æ¡è®°å½• ",1)])]),default:c(()=>[Ut((L(),ie(de,{data:H(t).events,stripe:"",style:{width:"100%"},onRowClick:A},{default:c(()=>[a(Y,{prop:"timestamp",label:"æ—¶é—´",width:"180"},{default:c(({row:B})=>[M(S(K(B.timestamp)),1)]),_:1}),a(Y,{prop:"deviceId",label:"è®¾å¤‡ID",width:"150"}),a(Y,{prop:"username",label:"é©¾é©¶å‘˜",width:"120"},{default:c(({row:B})=>[M(S(B.user?.username||"æœªçŸ¥"),1)]),_:1}),a(Y,{prop:"eventType",label:"äº‹ä»¶ç±»å‹",width:"120"},{default:c(({row:B})=>[a(X,{type:oe(B.eventType),size:"small"},{default:c(()=>[M(S(ne(B.eventType)),1)]),_:2},1032,["type"])]),_:1}),a(Y,{prop:"severity",label:"ä¸¥é‡ç¨‹åº¦",width:"100"},{default:c(({row:B})=>[a(X,{type:ge(B.severity),size:"small"},{default:c(()=>[M(S(pe(B.severity)),1)]),_:2},1032,["type"])]),_:1}),a(Y,{prop:"confidence",label:"ç½®ä¿¡åº¦",width:"100"},{default:c(({row:B})=>[M(S(B.confidence?(B.confidence*100).toFixed(1)+"%":"æœªçŸ¥"),1)]),_:1}),a(Y,{prop:"duration",label:"æŒç»­æ—¶é—´",width:"100"},{default:c(({row:B})=>[M(S(B.duration?B.duration+"ç§’":"æœªçŸ¥"),1)]),_:1}),a(Y,{prop:"context",label:"æè¿°","min-width":"200","show-overflow-tooltip":""}),a(Y,{label:"æ“ä½œ",width:"120",fixed:"right"},{default:c(({row:B})=>[a(te,{size:"small",onClick:vn(Me=>O(B),["stop"])},{default:c(()=>[...p[13]||(p[13]=[M(" è¯¦æƒ… ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ot,H(t).loading]]),r("div",Ti,[a(Ee,{"current-page":s.value.currentPage,"onUpdate:currentPage":p[4]||(p[4]=B=>s.value.currentPage=B),"page-size":s.value.pageSize,"onUpdate:pageSize":p[5]||(p[5]=B=>s.value.pageSize=B),"page-sizes":[10,20,50,100],total:s.value.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:F,onCurrentChange:N},null,8,["current-page","page-size","total"])])]),_:1})]),_:1}),a(Oe,{xs:24,sm:24,md:8,lg:8,xl:8},{default:c(()=>[a(U,{class:"statistics-section",shadow:"hover"},{header:c(()=>[...p[14]||(p[14]=[r("span",null,"äº‹ä»¶ç»Ÿè®¡å›¾è¡¨",-1)])]),default:c(()=>[a(kn,{data:H(t).events,loading:H(t).loading,onPeriodChange:G},null,8,["data","loading"])]),_:1}),a(U,{class:"severity-section",shadow:"hover"},{header:c(()=>[...p[15]||(p[15]=[r("span",null,"ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ",-1)])]),default:c(()=>[r("div",ki,[(L(!0),W(Fe,null,Ne(y.value,(B,Me)=>(L(),W("div",{key:Me,class:"severity-item"},[r("div",xi,[a(X,{type:ge(Me),size:"small"},{default:c(()=>[M(S(pe(Me)),1)]),_:2},1032,["type"])]),r("div",Ai,S(B),1),r("div",Di,S(we(B))+"% ",1)]))),128))])]),_:1}),a(U,{class:"device-stats-section",shadow:"hover"},{header:c(()=>[...p[16]||(p[16]=[r("span",null,"è®¾å¤‡äº‹ä»¶ç»Ÿè®¡",-1)])]),default:c(()=>[r("div",Oi,[(L(!0),W(Fe,null,Ne(u.value,B=>(L(),W("div",{key:B.deviceId,class:"device-stat-item"},[r("div",Mi,[r("div",Ri,S(B.deviceId),1),r("div",$i,S(B.username),1)]),r("div",Li,S(B.eventCount),1)]))),128))])]),_:1})]),_:1})]),_:1}),a(ae,{modelValue:l.value,"onUpdate:modelValue":p[6]||(p[6]=B=>l.value=B),title:"äº‹ä»¶è¯¦æƒ…",width:"800px"},{default:c(()=>[i.value?(L(),W("div",Pi,[a(Ge,{column:2,border:""},{default:c(()=>[a(ve,{label:"äº‹ä»¶ID"},{default:c(()=>[M(S(i.value.eventId),1)]),_:1}),a(ve,{label:"è®¾å¤‡ID"},{default:c(()=>[M(S(i.value.deviceId),1)]),_:1}),a(ve,{label:"é©¾é©¶å‘˜"},{default:c(()=>[M(S(i.value.user?.username||"æœªçŸ¥"),1)]),_:1}),a(ve,{label:"è”ç³»æ–¹å¼"},{default:c(()=>[M(S(i.value.user?.phone||"æœªçŸ¥"),1)]),_:1}),a(ve,{label:"äº‹ä»¶ç±»å‹"},{default:c(()=>[M(S(ne(i.value.eventType)),1)]),_:1}),a(ve,{label:"ä¸¥é‡ç¨‹åº¦"},{default:c(()=>[M(S(pe(i.value.severity)),1)]),_:1}),a(ve,{label:"ç½®ä¿¡åº¦"},{default:c(()=>[M(S((i.value.confidence*100).toFixed(1))+"%",1)]),_:1}),a(ve,{label:"æŒç»­æ—¶é—´"},{default:c(()=>[M(S(i.value.duration)+"ç§’",1)]),_:1}),a(ve,{label:"å‘ç”Ÿæ—¶é—´",span:2},{default:c(()=>[M(S(K(i.value.timestamp)),1)]),_:1}),a(ve,{label:"ä½ç½®",span:2},{default:c(()=>[M(S(Z(i.value.location)),1)]),_:1}),a(ve,{label:"è¡Œä¸ºæè¿°",span:2},{default:c(()=>[M(S(i.value.behavior),1)]),_:1}),a(ve,{label:"ä¸Šä¸‹æ–‡",span:2},{default:c(()=>[M(S(i.value.context),1)]),_:1})]),_:1})])):fe("",!0)]),_:1},8,["modelValue"])])}}},Ni=Ie(Fi,[["__scopeId","data-v-74d57346"]]),Ui=[{path:"/",redirect:"/dashboard"},{path:"/dashboard",name:"Dashboard",component:Rr,meta:{title:"å®æ—¶ç›‘æ§ä»ªè¡¨æ¿"}},{path:"/devices/:deviceId",name:"DeviceDetail",component:wi,meta:{title:"è®¾å¤‡è¯¦æƒ…"}},{path:"/events",name:"EventManagement",component:Ni,meta:{title:"äº‹ä»¶ç®¡ç†"}},{path:"/alerts",name:"AlertCenter",component:()=>Ke(()=>import("./AlertCenter-C_fAtiJ4.js"),__vite__mapDeps([0,1,2,3,4])),meta:{title:"å‘Šè­¦ä¸­å¿ƒ"}},{path:"/analytics",name:"Analytics",component:()=>Ke(()=>import("./Analytics-Cr7ARNc2.js"),__vite__mapDeps([5,2,1,3,6])),meta:{title:"æ•°æ®åˆ†æ"}},{path:"/users",name:"UserManagement",component:()=>Ke(()=>import("./UserManagement-BgIW5IMd.js"),__vite__mapDeps([7,1,2,3,8])),meta:{title:"ç”¨æˆ·ç®¡ç†"}},{path:"/websocket-test",name:"WebSocketTest",component:()=>Ke(()=>import("./WebSocketTest-CrVeIymN.js"),__vite__mapDeps([9,1,2,3,10])),meta:{title:"WebSocketæµ‹è¯•"}},{path:"/map-config-help",name:"MapConfigHelp",component:()=>Ke(()=>import("./MapConfigHelp-BsU0GYrR.js"),__vite__mapDeps([11,1,2,3,12])),meta:{title:"åœ°å›¾é…ç½®å¸®åŠ©"}}],Zn=lo({history:ro(),routes:Ui});Zn.beforeEach((e,t,n)=>{e.meta.title&&(document.title=`${e.meta.title} - Muse äº‘ç«¯å®æ—¶æ£€æµ‹å¹³å°`),n()});const nt=io(Po);for(const[e,t]of Object.entries(Co))nt.component(e,t);nt.use(co());nt.use(Zn);nt.use(To);nt.mount("#app");export{xt as D,kn as E,ss as F,At as H,rt as S,Ie as _,Wt as a,Te as r,mt as u,se as w};
