# 目录说明：

- muse-adminpanel目录为监控平台vue前端源码，主要运用了Element plus 和vue，
- muse-frontend 为硬件部分对应的前端，主要用于可视化，打包后的dist内容需要放到硬件目录的templates文件夹下面
- muse-hardware 为硬件部分需要的所有py程序一级模型文件，运行端口为0.0.0.0:5200
- muse-backend 系统的java后端，融合了硬件的接口和云监控平台的API接口

seriaTest为模块通信测试小工具，用于测试AT命令发送的时序是否恰当，从而稳定实现和模块的通信，当系统启动经常报错模块异常的时候，可以用这个测试是卡失效还是信号质量差抑或是其他问题等。

前端vue项目需要先
```bash
npm install
npm run dev
```
然后可以正常打开项目。


# 宝塔面板部署说明

## 宝塔面板Java项目配置

### 1. 启动命令配置

在宝塔面板的Java项目管理中，将启动命令修改为：

```bash
/www/server/java/jdk-21.0.2/bin/java -jar -Xmx1024M -Xms256M -Dspring.profiles.active=baota -Dfile.encoding=UTF-8 /www/wwwroot/spacemit.topcoder.fun/muse-backend-0.0.1-SNAPSHOT.jar --server.port=8080
```

### 2. 关键参数说明

| 参数 | 说明 |
|------|------|
| `-Dspring.profiles.active=baota` | 激活宝塔面板专用配置 |
| `-Dfile.encoding=UTF-8` | 设置文件编码为UTF-8 |
| `-Xmx1024M` | 最大堆内存1024MB |
| `-Xms256M` | 初始堆内存256MB |

### 3. 目录结构

```
/www/wwwroot/spacemit.topcoder.fun/
├── muse-backend-0.0.1-SNAPSHOT.jar    # JAR包文件
└── logs/                             # 应用日志目录
```

### 4. 环境配置

#### 数据库配置
- **主机**: localhost
- **端口**: 3306
- **数据库**: spacemit
- **用户名**: spacemit
- **密码**: 需要配置

#### Redis配置
- **主机**: localhost
- **端口**: 6379
- **密码**: 需要配置
- **数据库**: 0

### 5. 重要配置说明

#### 需要配置的密钥和密码

在部署前，需要在以下配置文件中添加实际的密钥和密码，因为我在上传到gitee的时候会事先抹除敏感数据：

**文件位置**: `src/main/resources/application-baota.properties`

需要配置的项目：
1. **数据库密码**:
   ```properties
   spring.datasource.password=YOUR_DATABASE_PASSWORD
   ```
   替换 `YOUR_DATABASE_PASSWORD` 为您的实际数据库密码

2. **JWT密钥**:
   ```properties
   jwt.secret=YOUR_JWT_SECRET_KEY
   ```
   替换 `YOUR_JWT_SECRET_KEY` 为您的实际JWT密钥（建议使用强密码）

3. **Redis密码** (如果需要):
   ```properties
   spring.redis.password=YOUR_REDIS_PASSWORD
   ```
   如果Redis设置了密码，请替换 `YOUR_REDIS_PASSWORD` 为实际密码

#### 其他配置文件

如果您使用其他环境配置，也需要在对应文件中配置：

- **开发环境**: `src/main/resources/application.properties`
- **生产环境**: `src/main/resources/application-prod.properties`

**注意**: 请确保不要将真实的密钥和密码提交到版本控制系统中。

#### 前端项目配置

**muse-adminpanel项目**也需要配置高德地图API密钥：

**文件位置**: `muse-adminpanel/src/config/env.js`

需要配置的项目：
1. **高德地图API密钥**:
   ```javascript
   amap: {
     apiKey: import.meta.env.VITE_AMAP_API_KEY || 'YOUR_AMAP_API_KEY',
     securityKey: import.meta.env.VITE_AMAP_SECURITY_KEY || 'YOUR_AMAP_SECURITY_KEY',
     // ... 其他配置
   }
   ```

**环境变量配置**:
在项目根目录创建 `.env` 文件（或 `.env.production` 用于生产环境）：
```bash
# 高德地图配置
VITE_AMAP_API_KEY=your_actual_amap_api_key
VITE_AMAP_SECURITY_KEY=your_actual_amap_security_key

# API配置
VITE_API_BASE_URL=http://your-domain.com
VITE_WS_URL=ws://your-domain.com/websocket
```

**获取高德地图API密钥**:
1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册并创建应用
3. 获取Web服务API密钥和安全密钥
4. 配置到上述文件中

### 6. nginx伪静态配置【很重要，不然会后端导致没法对接上vue-router】
在nginx配置项里面加上  

```nginx
    #PROXY-LOCAl-START 代理本地服务的相关配置
    #PROXY-START/
    
    location / {
    if ($uri = /) {
        return 301 /dashboard;
    }
	.....其他内容不变
```

如果java项目需要开启外网访问，请开启端口转发，然后在端口转发里面配置好你的域名 
